**Shunting Yard 算法**，由计算机科学家艾兹赫·迪科斯特拉（Edsger Dijkstra）提出，是一种用于将**中缀表达式**（例如：`3 + 4 * 5`）转换为**后缀表达式**（例如：`3 4 5 * +`）的算法。它的核心思想是通过栈来帮助处理表达式中的运算符优先级和括号，最终生成一个没有括号、计算顺序明确的后缀表达式。

### 为什么需要这个算法？

在我们日常使用的数学表达式中，**中缀表达式**是最常见的形式，比如 `3 + 4 * 5`，我们通常需要通过括号来明确运算顺序（例如 `(3 + 4) * 5`）。但是，计算机执行这些表达式时，直接处理中缀表达式会非常复杂，因为它涉及到括号、运算符优先级等问题。

而**后缀表达式**（也叫逆波兰表示法，RPN）没有括号，且运算符直接跟在操作数后面。计算机能够更容易地按照顺序进行计算，这样计算过程就变得简单了。所以，Shunting Yard 算法的作用就是把中缀表达式转换成后缀表达式。

### Shunting Yard 算法的工作原理

让我们一步步来理解这个算法的过程：

#### 1. **输入**：中缀表达式（例如 `3 + 4 * 5`）

#### 2. **输出**：后缀表达式（例如 `3 4 5 * +`）

#### 3. **基本思想**：

- **操作数**（数字、变量）直接放到输出队列。
- **运算符**（如 `+`、`-`、`*`、`/`）按优先级和结合性放到栈中。
- **括号**：左括号 `(` 进入栈，右括号 `)` 会弹出栈顶元素直到遇到左括号。

#### 4. **算法步骤**：

- 遍历中缀表达式中的每一个符号。
- **遇到操作数**：直接将其加入输出队列。
- **遇到运算符**：根据运算符的优先级决定是否将栈中的运算符弹出到输出队列。优先级高的运算符会先弹出。
- **遇到左括号 `(`**：将其压入栈中，表示新的子表达式开始。
- **遇到右括号 `)`**：弹出栈顶运算符直到遇到左括号 `(`，左括号丢弃。

#### 5. **最终**：将栈中剩下的所有运算符弹出到输出队列。

### 一个简单的例子

假设我们要将表达式 `3 + 4 * 5` 转换为后缀表达式。

1. **输入**：`3 + 4 * 5`
    
2. **初始化**：
    
    - 输出队列为空。
    - 运算符栈为空。
3. **扫描 `3`**（操作数）：  
    将 `3` 加入输出队列：`3`
    
4. **扫描 `+`**（运算符）：  
    将 `+` 压入栈中。
    
5. **扫描 `4`**（操作数）：  
    将 `4` 加入输出队列：`3 4`
    
6. **扫描 `*`**（运算符）：  
    `*` 的优先级比 `+` 高，因此将 `*` 压入栈中。
    
7. **扫描 `5`**（操作数）：  
    将 `5` 加入输出队列：`3 4 5`
    
8. **结束扫描**，栈中的运算符需要被弹出到输出队列：
    
    - `*` 被弹出并加入输出队列：`3 4 5 *`
    - `+` 被弹出并加入输出队列：`3 4 5 * +`
9. **最终输出**：`3 4 5 * +`
    

### 具体步骤的总结

1. 遇到操作数（数字或变量），直接放入输出队列。
2. 遇到运算符，根据栈中运算符的优先级决定是否弹出栈顶运算符，然后将当前运算符压入栈。
3. 遇到左括号 `(`，将其压入栈，表示一个新的子表达式的开始。
4. 遇到右括号 `)`，将栈中的运算符弹出，直到遇到左括号（此时丢弃左括号）。
5. 扫描完输入后，依次弹出栈中的运算符加入输出队列。

### 关键点

- **运算符优先级**：运算符的优先级决定了它们被处理的顺序。乘法和除法的优先级高于加法和减法。
- **结合性**：加法和减法是左结合的，乘法和除法也是左结合的。即同一优先级的运算符从左到右依次执行。
- **栈的作用**：栈用于存储运算符和括号，它帮助我们在不需要括号的情况下明确运算顺序。

### 优点和应用

- **简化括号问题**：通过转换为后缀表达式，Shunting Yard 算法消除了中缀表达式中对括号的需求，使得运算顺序变得更加清晰。
- **编译器实现**：在编译器中，Shunting Yard 算法常常用于将程序代码中的算术表达式转换为机器可处理的中间形式，帮助编译器生成高效的目标代码。
- **计算机科学中的应用**：这个算法不仅用于数学计算，还可以用于一些解析器、脚本语言的解释器等，需要解析复杂表达式的场合。

### 总结

Shunting Yard 算法是一种将中缀表达式转换为后缀表达式的算法，核心思想是通过栈来管理运算符和操作数，最终生成不需要括号的后缀表示法。它简化了运算符优先级和括号的处理，使得计算过程更加高效。这个算法在计算器、编译器、表达式求值等多个领域都有重要应用。