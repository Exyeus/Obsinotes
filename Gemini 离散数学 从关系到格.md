亲爱的同学们，

欢迎来到这趟关于离散数学的知识探索之旅！我知道你们中的一些同学可能觉得数学有点抽象，或者运算起来有些吃力，但这都没有关系。我的目标不是让大家死记硬背公式，而是帮助大家**理解它们背后的思想和逻辑，感受数学的乐趣和威力**。

就像建造一栋大厦，我们首先需要理解地基和梁柱的结构。离散数学中的许多概念，如函数、关系、代数系统等，就是我们构建更复杂数学和计算机科学理论的“基石”。今天，我们将从最基本但又极其重要的“函数”开始，逐步深入，并不断回顾和串联之前学过的知识点，让大家对整个知识体系有一个清晰的认识。

---

### 一、第八章：函数——映射世界的桥梁

我们先来聊聊“函数”。在我们的日常生活中，函数无处不在。比如，你的手机号码对应着一个唯一的手机用户；超市里商品的条形码对应着一个唯一的商品信息；甚至在地图上，每一个地点都对应着一个唯一的经纬度。这些例子背后都隐藏着同一个核心概念：**映射**。函数就是这样一种特殊的映射关系。

#### 1.1 什么是函数？——从直观到形式

想象一下，你有一台神奇的机器。你给它一个输入，它总是能给你一个确定的输出，而且这个输出是唯一的。你不会给它一个输入，结果它一会儿吐出苹果，一会儿又吐出香蕉，让人摸不着头脑。这就是函数最核心的直观感受。

##### 1.1.1 必要知识回顾：二元关系

在正式定义函数之前，我们快速回顾一下**二元关系**（这是第七章的内容，但非常重要）。
**关系**，顾名思义，就是事物之间的某种联系。在数学中，我们用**有序对**来表示这种联系。一个有序对 $<x, y>$ 表示 $x$ 与 $y$ 之间存在某种关系。**二元关系** $R$ 就是一个**有序对的集合**。例如，小于关系 $R = \{ <1,2>, <1,3>, <2,3> \}$ 就是一个关系。

##### 1.1.2 函数的精确定义

现在，我们把这种“唯一的输出”的概念形式化。

***定义 8.1 (函数)***
设 $F$ 为二元关系，若 $\forall x \in \text{dom } F$ 都存在<font color="#ffff00">唯一的</font> $y \in \text{ran } F$ 使 $xFy$ 成立，则称 $F$ 为函数。
对于函数 $F$，如果有 $xFy$，则记作 $y = F(x)$，并称 $y$ 为 $F$ 在 $x$ 的值。

**这个定义为什么是这样？** 让我们逐字逐句地拆解它：
*   **“设 $F$ 为二元关系”**：这表明函数首先是一个关系，它是一组有序对的集合。
*   **“若 $\forall x \in \text{dom } F$”**：`dom F` 是关系的定义域，也就是所有有序对的第一个元素（输入）的集合。这句话强调，对于**每一个有效的输入**，我们都要考虑它的输出。
*   **“都存在唯一的 $y \in \text{ran } F$ 使 $xFy$ 成立”**：这是最关键的部分！
    *   **“存在 $y$”**：意味着每个输入都有对应的输出。
    *   **“唯一的 $y$”**：意味着每个输入只有一个确定的输出。这就是前面提到的“不会一会儿苹果一会儿香蕉”。

**举例分析：**
*   $F_1 = \{<x_1, y_1>, <x_2, y_2>, <x_3, y_2>\}$
    *   `dom F_1 = {x_1, x_2, x_3}`。
    *   对于 $x_1$，输出是 $y_1$，唯一。
    *   对于 $x_2$，输出是 $y_2$，唯一。
    *   对于 $x_3$，输出是 $y_2$，唯一。
    *   虽然 $y_2$ 有多个输入对应，但这不影响函数的定义。每个输入仍然只有一个输出。所以，$F_1$ **是函数**。
*   $F_2 = \{<x_1, y_1>, <x_1, y_2>\}$
    *   `dom F_2 = {x_1}`。
    *   对于 $x_1$，它既对应 $y_1$ 又对应 $y_2$。这里的输出**不唯一**。所以，$F_2$ **不是函数**。

#### 1.2 函数相等——“形神兼备”才算数

两个函数什么时候才算相等呢？就像两个人长得一样，还得是同一个人才算数。

***定义 8.2 (函数相等)***
设 $F, G$ 为函数，则 $F = G \Leftrightarrow F \subseteq G \land G \subseteq F$。
如果两个函数 $F$ 和 $G$ 相等，一定满足下面两个条件：
(1) $\text{dom } F = \text{dom } G$
(2) $\forall x \in \text{dom } F = \text{dom } G$ 都有 $F(x) = G(x)$

**为什么是这两个条件？**
*   第一个条件 `dom F = dom G` 保证了两个函数的“作用范围”一样。如果一个函数能处理的输入，另一个不能，那它们肯定不是同一个函数。
*   第二个条件 `F(x) = G(x)` 保证了在相同的输入下，它们的“行为”也一样，即输出相同。

**案例分析：**
函数 $F(x) = (x^2 - 1) / (x + 1)$ 和 $G(x) = x - 1$ 不相等。
*   **直观思考：** 这两个表达式看起来很像，$(x^2 - 1) / (x + 1)$ 化简后就是 $x - 1$ 啊！
*   **深入剖析：**
    *   对于 $G(x) = x - 1$，它的定义域是所有实数 $x \in \mathbb{R}$。
    *   对于 $F(x) = (x^2 - 1) / (x + 1)$，由于分母不能为零，所以 $x + 1 \ne 0$，即 $x \ne -1$。所以它的定义域是 $\mathbb{R} \setminus \{-1\}$。
*   **结论：** 它们的定义域不同！`dom F = R \{-1}`，而 `dom G = R`。显然 `dom F \subset dom G`。
虽然在 `dom F` 上 $F(x)$ 和 $G(x)$ 的值确实相等，但由于定义域不一致，它们不能算作同一个函数。这就像两个人，即使长得一模一样，但身份证号不同，他们依然是两个人。

#### 1.3 从 A 到 B 的函数——明确“舞台”和“目标”

当我们说一个函数 $f$ 是“从 A 到 B 的函数”时，我们不仅仅是说它满足函数的定义，还明确了它的输入来源和输出的归属。

***定义 8.3 (从 A 到 B 的函数)***
设 $A, B$ 为集合，如果 $f$ 为函数，$\text{dom } f = A$，$\text{ran } f \subseteq B$，则称 $f$ 为从 $A$ 到 $B$ 的函数，记作 $f: A \to B$。

*   **`dom f = A`**：这意味着我们承诺函数 $f$ 能够处理 $A$ 中<font color="#ffff00">所有的元素</font>作为输入。 $A$ 被称为函数的**定义域**（Domain）。
*   **`ran f \subseteq B`**：这意味着函数 $f$ 的所有输出值都<font color="#ffff00">落在集合</font> $B$ 中。$B$ 被称为函数的**共定义域**（Codomain）或**值域**（Range，如果 $\text{ran } f = B$）。

**例：**
*   $f: \mathbb{N} \to \mathbb{N}$, $f(x) = 2x$ 是从 $\mathbb{N}$ 到 $\mathbb{N}$ 的函数。
    *   定义域是自然数集 $\mathbb{N}$ (包括0或不包括0，视定义而定，通常指 $\{0, 1, 2, ...\}$ 或 $\{1, 2, 3, ...\}$)。
    *   值域是所有偶数，即 $\{0, 2, 4, ...\}$ (或 $\{2, 4, 6, ...\}$)。这些偶数都在 $\mathbb{N}$ 里面，所以满足 `ran f \subseteq N`。
*   $g: \mathbb{N} \to \mathbb{N}$, $g(x) = 2$ 也是从 $\mathbb{N}$ 到 $\mathbb{N}$ 的函数。
    *   这是一个**常函数**（Constant Function），无论输入什么，输出都是 2。

#### 1.4 $B^A$——函数的集合，计算可能性

现在我们知道了函数的定义，那么，从一个集合到另一个集合的所有可能函数有多少个呢？

***定义 8.4 ($B^A$)***
所有从 $A$ 到 $B$ 的函数的集合记作 $B^A$，符号化表示为 $B^A = \{f \mid f: A \to B\}$。

*   **如果 $|A| = m, |B| = n$，且 $m, n > 0$**：
    *   我们可以把每个函数想象成从 $A$ 中每个元素出发，指向 $B$ 中一个元素的箭头。
    *   $A$ 中有 $m$ 个元素。对于 $A$ 中第一个元素，它有 $n$ 种选择（可以映射到 $B$ 中任意一个元素）。
    *   对于 $A$ 中第二个元素，它也有 $n$ 种选择。
    *   ...以此类推，对于 $A$ 中第 $m$ 个元素，它也有 $n$ 种选择。
    *   根据乘法原理，总的函数个数就是 $n \times n \times \dots \times n$（$m$ 次），即 $n^m$。
    *   所以，**$$|B^A| = n^m$$

*   **特殊情况：**
    *   **$A = \emptyset$ (空集)**：
        *   从空集到任何集合 $B$ 的函数有且只有一个，那就是**空函数** `f = \emptyset`。
        *   空函数是一个特殊的函数，它没有任何有序对，但它满足函数的所有定义（因为定义域是空集，对于空集中的所有元素，“都存在唯一的输出”这个条件是真命题，因为它没有反例）。
        *   所以，$B^\emptyset = \{\emptyset\}$，其基数是 1。
        *   这与 $n^0 = 1$ 的公式是吻合的。
    *   **$A \ne \emptyset$ 且 $B = \emptyset$ (非空集到空集)**：
        *   如果 $A$ 是非空集，而 $B$ 是空集，那么 $A$ 中的任何元素都无法映射到 $B$ 中（因为 $B$ 中没有元素）。
        *   因此，不存在从 $A$ 到 $B$ 的函数。
        *   所以，$\emptyset^A = \emptyset$，其基数是 0。
        *   这与 $0^m = 0$ (当 $m > 0$) 的公式是吻合的。
    *   **注意：** $B^\emptyset = \{\emptyset\}$（有1个函数，即空函数）与 $\emptyset^A = \emptyset$（没有函数）是不同的。前者表示有一个函数（空函数），后者代表没有任何函数。

#### 1.5 函数的像和完全原像——洞察映射的“来龙去脉”

有了函数，我们就能谈论元素通过函数“变形”后的样子，以及哪些元素是“变形”前产生某个结果的来源。

***定义 8.5 (函数的像和完全原像)***
设函数 $f: A \to B$, $A_1 \subseteq A$, $B_1 \subseteq B$.
(1) $A_1$ 在 $f$ 下的像 $f(A_1) = \{f(x) \mid x \in A_1\}$。
    *   当 $A_1 = A$ 时，$f(A)$ 就是<font color="#ffff00">函数的</font>**像**（Image），也称**值域**。它包含了所有实际的输出值。
(2) $B_1$ 在 $f$ 下的<font color="#ffff00">完全原像</font> $f^{-1}(B_1) = \{x \mid x \in A \land f(x) \in B_1\}$。
    *   注意：这里的 $f^{-1}$ 并不代表反函数，而是一种集合操作符号。

**注意要点：**
*   **函数值 $f(x) \in B$**：单个元素的输出是一个元素，它属于共定义域 $B$。
*   **像 $f(A_1) \subseteq B$**：一个子集的像是一个子集，它<font color="#ffff00">包含在共定义域</font> $B$ 中。
*   **一般说来 $f^{-1}(f(A_1)) \ne A_1$**：
    *   **为什么？简单说明：** 假设函数 $f$ 不是单射（即不同的输入可以有相同的输出）。
    *   例如：$f(x) = x^2$，从 $\mathbb{Z}$ 到 $\mathbb{Z}$。
    *   设 $A_1 = \{1, -1\}$。那么 $f(A_1) = \{f(1), f(-1)\} = \{1^2, (-1)^2\} = \{1\}$。
    *   现在求 $f^{-1}(f(A_1)) = f^{-1}(\{1\}) = \{x \mid f(x) = 1\} = \{x \mid x^2 = 1\} = \{1, -1\}$。
    *   在这个例子中， $f^{-1}(f(A_1)) = A_1$。
    *   **再举一个不等于的例子：**
        *   $f: \{1, 2, 3\} \to \{a, b\}$，定义 $f(1)=a, f(2)=a, f(3)=b$。
        *   取 $A_1 = \{1\}$。
        *   $f(A_1) = \{f(1)\} = \{a\}$。
        *   $f^{-1}(f(A_1)) = f^{-1}(\{a\}) = \{x \mid f(x) = a\} = \{1, 2\}$。
        *   很明显， $\{1, 2\} \ne \{1\}$，所以 $f^{-1}(f(A_1)) \ne A_1$。
*   **但是 $A_1 \subseteq f^{-1}(f(A_1))$：**
    *   **为什么？** 设 $x \in A_1$。根据像的定义，$f(x) \in f(A_1)$。
    *   再根据完全原像的定义，如果 $f(x)$ 属于某个集合 $Y$，那么 $x$ 必然属于 $f^{-1}(Y)$。
    *   这里，我们的 $Y$ 就是 $f(A_1)$。所以 $x \in f^{-1}(f(A_1))$。
    *   因此，所有 $A_1$ 中的元素都包含在 $f^{-1}(f(A_1))$ 中。

#### 1.6 函数的性质——衡量映射的“质量”

我们不仅要定义函数，还要根据它们在映射上的特点来给它们分类。这就像评价一个工具：它能否完全覆盖目标？它会不会产生重复的结果？

***定义 8.6 (满射、单射、双射)***
设 $f: A \to B$，
(1) 若 $\text{ran } f = B$，则称 $f: A \to B$ 是**满射**的（Surjective 或 Onto）。
    *   **直观理解：** 共定义域 $B$ 中的<font color="#ffff00">每个元素</font>都被 $A$ 中的至少一个元素“射中”了。没有“漏网之鱼”。

(2) 若 $\forall y \in \text{ran } f$ 都存在唯一的 $x \in A$ 使得 $f(x) = y$，则称 $f: A \to B$ 是**单射**的（Injective 或 One-to-One）。
    *   **直观理解：** 不同的输入一定对应不同的输出。不会出现两个不同的输入“射中”同一个输出。每个输出最多被一个输入“射中”。
    *   **证明方法：** 通常有两种等价方式：
        *   **方法一 (正面)：** 假设 $f(x_1) = f(x_2)$，推导出 $x_1 = x_2$。这是最常用的方法。
        *   **方法二 (反面)：** 假设 $x_1 \ne x_2$，推导出 $f(x_1) \ne f(x_2)$。
(3) 若 $f: A \to B$ 既是满射又是单射的，则称 $f: A \to B$ 是**双射**的（Bijective 或 One-to-One Correspondence）。
    *   **直观理解：** $A$ 和 $B$ 之间建立了一一对应的关系。每个 $A$ 中的元素都有一个唯一的 $B$ 中元素对应，且 $B$ 中每个元素都被 $A$ 中的一个唯一的元素对应。

**例 (构造双射函数)：**
对于给定的集合 $A$ 和 $B$ 构造双射函数 $f: A \to B$。
(1) $A = P(\{1, 2, 3\})$, $B = \{0, 1\}^{\{1, 2, 3\}}$ (即所有从 $\{1, 2, 3\}$ 到 $\{0, 1\}$ 的函数组成的集合)。

**解 (1)：**
*   首先，让我们列出 $A$ 中的所有元素：
    $A = \{\emptyset, \{1\}, \{2\}, \{3\}, \{1,2\}, \{1,3\}, \{2,3\}, \{1,2,3\}\}$。
    可以看到 $|A| = 2^3 = 8$。
*   接下来，我们理解 $B = \{0, 1\}^{\{1, 2, 3\}}$。根据前面的定义，这意味着从集合 $\{1, 2, 3\}$ 到集合 $\{0, 1\}$ 的所有函数。每个这样的函数可以看作一个长度为 3 的二进制序列，其中第 $i$ 个位置的值表示 $f(i)$。
    *   例如，函数 $f_0: \{1, 2, 3\} \to \{0, 1\}$ 定义为 $f_0(1)=0, f_0(2)=0, f_0(3)=0$。这对应于二进制序列 $000$。
    *   函数 $f_1: \{1, 2, 3\} \to \{0, 1\}$ 定义为 $f_1(1)=0, f_1(2)=0, f_1(3)=1$。这对应于二进制序列 $001$。
    *   ...
    *   函数 $f_7: \{1, 2, 3\} \to \{0, 1\}$ 定义为 $f_7(1)=1, f_7(2)=1, f_7(3)=1$。这对应于二进制序列 $111$。
    *   因此，$B = \{f_0, f_1, \dots, f_7\}$， $|B| = 2^3 = 8$。

*   **这个对应的实质是什么？**
    *   $P(\{1, 2, 3\})$ 的元素是 $\{1, 2, 3\}$ 的子集。我们可以用一个长度为 3 的二进制序列来表示这些子集。如果一个元素 $i$ 包含在子集中，对应的位置为 1；否则为 0。
        *   例如，$\emptyset$ 对应 $000$。
        *   $\{1\}$ 对应 $100$。
        *   $\{1, 2\}$ 对应 $110$。
    *   而 $B = \{0, 1\}^{\{1, 2, 3\}}$ 中的每个函数也可以看作一个长度为 3 的二进制序列（如上所述）。
    *   所以，我们可以建立一个自然的双射：将 $P(\{1, 2, 3\})$ 中的每个子集 $S$ 映射到其**特征函数** $\chi_S$。
    *   **特征函数 $\chi_S: \{1, 2, 3\} \to \{0, 1\}$ 定义为：**
        $\chi_S(x) = 1$ 如果 $x \in S$
        $\chi_S(x) = 0$ 如果 $x \notin S$
    *   例如：
        *   $f(\emptyset) = \chi_\emptyset = f_0$ (000)
        *   $f(\{1\}) = \chi_{\{1\}} = f_4$ (100) (注意：这里我的 $f_1, f_2, f_3$ 对应了你讲义中的 $001, 010, 011$。我的 $f_4, f_5, f_6, f_7$ 对应了你的 $100, 101, 110, 111$)
        *   $f(\{2\}) = \chi_{\{2\}} = f_2$ (010)
        *   $f(\{3\}) = \chi_{\{3\}} = f_1$ (001)
        *   $f(\{1,2\}) = \chi_{\{1,2\}} = f_6$ (110)
        *   $f(\{1,3\}) = \chi_{\{1,3\}} = f_5$ (101)
        *   $f(\{2,3\}) = \chi_{\{2,3\}} = f_3$ (011)
        *   $f(\{1,2,3\}) = \chi_{\{1,2,3\}} = f_7$ (111)
    *   这个映射是双射的，因为它为每个子集分配了唯一的二进制序列，并且每个二进制序列都唯一地对应一个子集。

**例：$A = \{1, 2, \dots, n\}, B = \{1, 2, \dots, m\}$**
*   **$A$ 到 $B$ 的满射有多少个？**
    *   **条件：** 必须有 $n \ge m$。如果 $n < m$，不可能有满射，因为元素不够“射中”所有目标。
    *   **思路：** 这可以用**容斥原理**来计算。
        *   设 $S$ 是所有从 $A$ 到 $B$ 的映射的集合， $|S| = m^n$。
        *   我们想要计算的是“至少一个 $B$ 中的元素没被射中”的映射数量，然后从总数中减去。
        *   设 $P_i$ 是 $B$ 中第 $i$ 个元素没被射中的性质。
        *   我们要求的是 $|S| - |\bigcup_{i=1}^m P_i|$。
        *   使用容斥原理：$|\bigcup P_i| = \sum |P_i| - \sum |P_i \cap P_j| + \dots$
        *   $|P_i|$： $B$ 中 $i$ 没被射中，相当于映射到 $B \setminus \{i\}$，所以有 $(m-1)^n$ 个。
        *   $|P_i \cap P_j|$： $B$ 中 $i, j$ 没被射中，相当于映射到 $B \setminus \{i, j\}$，所以有 $(m-2)^n$ 个。
        *   ...
        *   所以，满射的数量是：
            $$m^n - \binom{m}{1}(m-1)^n + \binom{m}{2}(m-2)^n - \dots + (-1)^m \binom{m}{m}(m-m)^n$$
            也可以写成：
            $$\sum_{k=0}^m (-1)^k \binom{m}{k} (m-k)^n$$
            这被称为**第二类斯特林数**的乘积形式。
    *   **你的讲义中写着 `n^m m! m^n - m` 后面加问号，并说“原因：有重复”。**
        *   这是对的，这个公式显然是错的。它试图用排列组合的思想来计算，但排列组合通常是计算“选中”而非“覆盖”的。直接用 $m^n$ 减去不满足条件的映射，容斥原理正是解决这类问题的利器。

*   **$A$ 到 $B$ 的单射有多少个？**
    *   **条件：** 必须有 $n \le m$。如果 $n > m$，不可能有单射，因为“鸽巢原理”告诉我们，至少有两个输入会映射到同一个输出。
    *   **思路：** 从 $B$ 中选择 $n$ 个不同的元素作为像，然后将 $A$ 中的 $n$ 个元素与这 $n$ 个元素一一对应。
    *   这等同于从 $m$ 个元素中选出 $n$ 个进行排列的数量，即**排列数 $P(m, n)$ 或 $A_m^n$**。
        $$P(m, n) = \frac{m!}{(m-n)!} = m \times (m-1) \times \dots \times (m-n+1)$$

**例 (双射证明)：**
设 $f: \mathbb{R} \times \mathbb{R} \to \mathbb{R} \times \mathbb{R}$，定义 $f(<x, y>) = <x+y, x-y>$。证明 $f$ 既是满射的，也是单射的。

**证 (满射)：**
*   **目标：** 任取共定义域中的一个元素 $<u, v> \in \mathbb{R} \times \mathbb{R}$，找到定义域中的一个元素 $<x, y> \in \mathbb{R} \times \mathbb{R}$，使得 $f(<x, y>) = <u, v>$。
*   **思路：** 我们需要解方程组：
    $x + y = u$
    $x - y = v$
*   **求解：**
    *   两式相加：$(x+y) + (x-y) = u+v \Rightarrow 2x = u+v \Rightarrow x = \frac{u+v}{2}$。
    *   两式相减：$(x+y) - (x-y) = u-v \Rightarrow 2y = u-v \Rightarrow y = \frac{u-v}{2}$。
*   **结论：** 对于任意给定的 $<u, v>$，我们确实找到了一个对应的输入 $<x, y> = <\frac{u+v}{2}, \frac{u-v}{2}>$。
    *   而且，由于 $u, v \in \mathbb{R}$，所以 $\frac{u+v}{2}$ 和 $\frac{u-v}{2}$ 也都在 $\mathbb{R}$ 中。
*   因此，$f$ 是满射的。

**证 (单射)：**
*   **目标：** 假设 $f(<x_1, y_1>) = f(<x_2, y_2>)$，推导出 $<x_1, y_1> = <x_2, y_2>$。
*   **思路：** 将函数的定义代入等式，然后解方程组。
*   **推导：**
    $f(<x_1, y_1>) = f(<x_2, y_2>)$
    $\Leftrightarrow <x_1+y_1, x_1-y_1> = <x_2+y_2, x_2-y_2>$
    $\Leftrightarrow x_1+y_1 = x_2+y_2 \quad (\text{式 1})$
       $x_1-y_1 = x_2-y_2 \quad (\text{式 2})$
    *   $(\text{式 1}) + (\text{式 2}) \Rightarrow (x_1+y_1) + (x_1-y_1) = (x_2+y_2) + (x_2-y_2)$
        $\Rightarrow 2x_1 = 2x_2 \Rightarrow x_1 = x_2$。
    *   将 $x_1 = x_2$ 代入 $(\text{式 1})$：$x_1+y_1 = x_1+y_2 \Rightarrow y_1 = y_2$。
*   **结论：** 我们成功推导出 $x_1 = x_2$ 且 $y_1 = y_2$，即 $<x_1, y_1> = <x_2, y_2>$。
*   因此，$f$ 是单射的。

**总结证明方法 (非常实用)：**
*   **证明 $f: A \to B$ 是满射的方法：**
    *   任取 $y \in B$ (共定义域中的任意元素)。
    *   找到 $x \in A$ (定义域中的一个元素，通常要给出 $x$ 的具体表达式或证明其存在性)，使得 $f(x) = y$。
*   **证明 $f: A \to B$ 是单射的方法：**
    *   **方法一 (假设输出相同，推导输入相同)：**
        *   $\forall x_1, x_2 \in A$，假设 $f(x_1) = f(x_2)$。
        *   通过推理过程，推导出 $x_1 = x_2$。
    *   **方法二 (假设输入不同，推导输出不同)：**
        *   $\forall x_1, x_2 \in A$，假设 $x_1 \ne x_2$。
        *   通过推理过程，推导出 $f(x_1) \ne f(x_2)$。
*   **证明 $f: A \to B$ 不是满射的方法：**
    *   找到一个 $y \in B$，使得 $y \notin \text{ran } f$ (即，没有 $A$ 中的元素能映射到这个 $y$)。
*   **证明 $f: A \to B$ 不是单射的方法：**
    *   找到两个不同的元素 $x_1, x_2 \in A$ ($x_1 \ne x_2$)，但是它们的输出相同 ($f(x_1) = f(x_2)$)。

#### 1.7 某些重要函数——特殊身份与应用

有些函数因为其普遍性或特殊结构而具有重要的地位。

***定义 8.7 (重要函数类型)***
(1) **常函数 (Constant Function):** 设 $f: A \to B$，如果存在 $c \in B$ 使得对所有的 $x \in A$ 都有 $f(x) = c$，则称 $f: A \to B$ 是常函数。
    *   无论输入什么，输出都固定不变。例如 $f(x) = 5$。
(2) **恒等函数 (Identity Function):** 称 $A$ 上的恒等关系 $I_A$ 为 $A$ 上的恒等函数，对所有的 $x \in A$ 都有 $I_A(x) = x$。
    *   输入是什么，输出就是什么。`id(x) = x`。它总是双射的。
(3) **单调函数 (Monotone Function):** 针对偏序集之间的函数。
    *   设 $<A, \preceq>$ 和 $<B, \preceq'>$ 为偏序集， $f: A \to B$。
    *   如果对任意的 $x_1, x_2 \in A$, $x_1 \preceq x_2$，就有 $f(x_1) \preceq' f(x_2)$，则称 $f$ 为**单调递增**的。
    *   如果对任意的 $x_1, x_2 \in A$, $x_1 \prec x_2$，就有 $f(x_1) \prec' f(x_2)$，则称 $f$ 为**严格单调递增**的。
    *   类似地也可以定义单调递减和严格单调递减的函数。
    *   **直观理解：** 函数保持了元素之间的顺序关系。
    *   **例：**
        *   偏序集 $<P(\{a, b\}), \subseteq>$ 和 $<\{0,1\}, \le>$。
        *   定义 $f: P(\{a, b\}) \to \{0,1\}$，$f(\emptyset) = f(\{a\}) = f(\{b\}) = 0$, $f(\{a, b\}) = 1$。
        *   $P(\{a, b\})$ 元素的顺序：$\emptyset \subseteq \{a\}$, $\emptyset \subseteq \{b\}$, $\{a\} \subseteq \{a,b\}$, $\{b\} \subseteq \{a,b\}$。
        *   检查单调性：
            *   $\emptyset \subseteq \{a\} \Rightarrow f(\emptyset)=0, f(\{a\})=0 \Rightarrow 0 \le 0$。成立。
            *   $\{a\} \subseteq \{a,b\} \Rightarrow f(\{a\})=0, f(\{a,b\})=1 \Rightarrow 0 \le 1$。成立。
        *   $f$ 是单调递增的。
        *   **但不是严格单调递增的：** 因为 $\emptyset \prec \{a\}$（真包含），但 $f(\emptyset) = 0, f(\{a\}) = 0$，所以 $f(\emptyset) \not\prec f(\{a\})$。它没有严格保持序。

(4) **特征函数 (Characteristic Function):** 用于描述集合的元素。
    *   设 $A$ 为集合，对于任意的 $A' \subseteq A$， $A'$ 的特征函数 $\chi_{A'}: A \to \{0,1\}$ 定义为：
        $\chi_{A'}(a) = 1$, 如果 $a \in A'$
        $\chi_{A'}(a) = 0$, 如果 $a \in A \setminus A'$
    *   **用途：** 特征函数提供了一种用二进制序列来表示子集的方法。一个集合 $A$ 的所有子集 $P(A)$ 与从 $A$ 到 $\{0,1\}$ 的所有函数 $ \{0,1\}^A $ 之间存在一个自然的双射。这是非常重要的概念，我们会在“集合的基数”部分再次遇到它。
    *   **例：** $A = \{a, b, c\}$
        *   $\chi_\emptyset = \{<a,0>, <b,0>, <c,0>\}$
        *   $\chi_{\{a,b\}} = \{<a,1>, <b,1>, <c,0>\}$

(5) **自然映射 (Natural Mapping):** 关联等价关系与商集。
    *   设 $R$ 是 $A$ 上的等价关系（这是第七章的内容），令 $g: A \to A/R$，定义 $g(a) = [a]$, $\forall a \in A$。
    *   称 $g$ 是从 $A$ 到商集 $A/R$ 的自然映射。
    *   **商集 $A/R$** 是由所有等价类组成的集合。每个等价类 $[a]$ 包含了所有与 $a$ 相关的元素。
    *   **性质：** 自然映射 $g$ 总是**满射**的（因为商集中每个等价类 $[a]$ 都有一个元素 $a$ 映射到它）。
    *   **当且仅当 $R$ 是恒等关系 $I_A$ 时，自然映射是双射的。** 否则，它不是单射的（例如，如果 $a \ne b$ 但 $aRb$，那么 $g(a) = [a]$ 且 $g(b) = [b]$，但 $[a] = [b]$，所以 $g(a) = g(b)$，它就不是单射）。
    *   **例：** $A = \{1,2,3\}, R = \{<1,2>,<2,1>\} \cup I_A$。
        *   等价类：$[1]=\{1,2\}, [2]=\{1,2\}, [3]=\{3\}$。
        *   商集 $A/R = \{\{1,2\}, \{3\}\}$。
        *   自然映射 $g: A \to A/R$：
            $g(1) = \{1,2\}$
            $g(2) = \{1,2\}$
            $g(3) = \{3\}$
        *   这里 $g$ 是满射，但不是单射（因为 $g(1)=g(2)$ 而 $1 \ne 2$）。

---

### 二、函数的复合与反函数——函数的“组合”与“逆转”

函数不仅可以单独使用，还可以像搭积木一样组合起来，或者“反向操作”。

#### 2.1 复合函数基本定理——函数的“流水线”作业

想象一下，你有一台果汁机（函数 $f$），能把水果变成原浆；还有一台罐装机（函数 $g$），能把原浆罐装起来。那么，从水果到罐装果汁的整个过程，就是这两个函数的复合。

***定理 8.1 (复合函数)***
设 $F, G$ 是函数，则 $F \circ G$ 也是函数，且满足：
1.  $\text{dom}(F \circ G) = \{x \mid x \in \text{dom } F \land F(x) \in \text{dom } G\}$
    *   **直观理解：** 一个输入 $x$ 能够通过复合函数作用，需要满足两个条件：
        *   $x$ 必须是第一个函数 $F$ 的有效输入（`x \in dom F`）。
        *   $F(x)$ 的输出必须是第二个函数 $G$ 的有效输入（`F(x) \in dom G`）。
2.  $\forall x \in \text{dom}(F \circ G)$ 有 $(F \circ G)(x) = G(F(x))$。
    *   **注意顺序：** $(F \circ G)(x)$ 表示先应用 $F$，$F(x)$ 作为结果，再将这个结果作为 $G$ 的输入。符号上是从右到左。
    *   这与高中数学的写法一致。有些离散数学教材会写成 $G \circ F$ 表示先 $F$ 后 $G$，这取决于定义，但一般情况下，我们约定 $(F \circ G)(x) = G(F(x))$。

**推论 1 (结合律)：**
设 $F, G, H$ 为函数，则 $(F \circ G) \circ H$ 和 $F \circ (G \circ H)$ 都是函数，且 $(F \circ G) \circ H = F \circ (G \circ H)$。
*   这说明函数复合运算是**可结合**的。无论你先组合哪两个函数，最终的复合函数都是一样的。

**推论 2 (链式表示)：**
设 $f: A \to B$, $g: B \to C$，则 $f \circ g: A \to C$，且 $\forall x \in A$ 都有 $(f \circ g)(x) = g(f(x))$。
*   这里的符号表示是 $f \circ g$ 代表先 $f$ 后 $g$。这在数学分析中很常见。请务必注意教材中的符号约定。在你的讲义中，`F \circ G (x) = G(F(x))`，即 $F$ 是右边的， $G$ 是左边的。所以 $F \circ G$ 表示先 $F$ 后 $G$。

#### 2.2 函数的复合运算与函数性质——“质量”的传承

复合函数会继承原函数的哪些“质量”呢？

***定理 8.2 (性质保持)***
设 $f: A \to B$, $g: B \to C$。
(1) 如果 $f: A \to B$, $g: B \to C$ 都是**满射**的，则 $f \circ g: A \to C$ 也是满射的。
    *   **直观：** 如果第一个函数把 $A$ 完全覆盖到 $B$，第二个函数又把 $B$ 完全覆盖到 $C$，那么从 $A$ 到 $C$ 肯定也是完全覆盖。
(2) 如果 $f: A \to B$, $g: B \to C$ 都是**单射**的，则 $f \circ g: A \to C$ 也是单射的。
    *   **直观：** 如果第一个函数不产生重复输出，第二个函数也不产生重复输出，那么整个过程也不会产生重复输出。
(3) 如果 $f: A \to B$, $g: B \to C$ 都是**双射**的，则 $f \circ g: A \to C$ 也是双射的。
    *   **直观：** 单射和满射的结合，所以是双射。

***定理 8.3 (恒等函数的作用)***
设 $f: A \to B$，则 $f = f \circ I_B = I_A \circ f$。
*   **直观：** 恒等函数就像乘法中的 1，它不改变被作用的对象。先 $f$ 再 $I_B$ 仍然是 $f$；先 $I_A$ 再 $f$ 仍然是 $f$。

**注意：定理 8.2 说明函数的复合能够保持函数单射、满射、双射的性质。但定理的逆命题不为真！**
即如果 $f \circ g: A \to C$ 是单射（或满射、双射），不一定有 $f: A \to B$ 和 $g: B \to C$ 都是单射（或满射、双射）。

**为什么逆命题不真？**
*   **复合函数是单射，但 $g$ 不是单射的例子：**
    *   考虑集合 $A = \{a_1, a_2, a_3\}$, $B = \{b_1, b_2, b_3, b_4\}$, $C = \{c_1, c_2, c_3\}$。
    *   令 $f = \{<a_1, b_1>, <a_2, b_2>, <a_3, b_3>\}$ (从 $A$ 到 $B$ 的单射，但不是满射)。
    *   令 $g = \{<b_1, c_1>, <b_2, c_2>, <b_3, c_3>, <b_4, c_3>\}$ (从 $B$ 到 $C$ 的满射，但不是单射，因为 $b_3 \ne b_4$ 但 $g(b_3)=g(b_4)=c_3$)。
    *   复合函数 $f \circ g$ (先 $f$ 后 $g$)：
        *   $(f \circ g)(a_1) = g(f(a_1)) = g(b_1) = c_1$
        *   $(f \circ g)(a_2) = g(f(a_2)) = g(b_2) = c_2$
        *   $(f \circ g)(a_3) = g(f(a_3)) = g(b_3) = c_3$
    *   所以 $f \circ g = \{<a_1, c_1>, <a_2, c_2>, <a_3, c_3>\}$。
    *   $f \circ g$ 是单射 (因为 $a_1, a_2, a_3$ 对应不同的 $c_1, c_2, c_3$)。
    *   但 $g$ 显然不是单射的。

*   **复合函数是满射，但 $f$ 不是满射的例子：**
    *   考虑集合 $A = \{a_1, a_2, a_3\}$, $B = \{b_1, b_2, b_3\}$, $C = \{c_1, c_2\}$。
    *   令 $f = \{<a_1, b_1>, <a_2, b_2>, <a_3, b_2>\}$ (从 $A$ 到 $B$ 的满射，但不是单射，因为 $a_2 \ne a_3$ 但 $f(a_2)=f(a_3)=b_2$)。
    *   令 $g = \{<b_1, c_1>, <b_2, c_2>, <b_3, c_2>\}$ (从 $B$ 到 $C$ 的满射，但不是单射，因为 $b_2 \ne b_3$ 但 $g(b_2)=g(b_3)=c_2$)。
    *   复合函数 $f \circ g$ (先 $f$ 后 $g$)：
        *   $(f \circ g)(a_1) = g(f(a_1)) = g(b_1) = c_1$
        *   $(f \circ g)(a_2) = g(f(a_2)) = g(b_2) = c_2$
        *   $(f \circ g)(a_3) = g(f(a_3)) = g(b_2) = c_2$
    *   所以 $f \circ g = \{<a_1, c_1>, <a_2, c_2>, <a_3, c_2>\}$。
    *   $f \circ g$ 是满射 (因为 $c_1, c_2$ 都被射中了)。
    *   但 $f$ 显然不是单射。

#### 2.3 反函数——“反向操作”的条件

想象一下，你有一台自动贩卖机，投币后按饮料编号出饮料。它的“反向操作”就是给定一个饮料，能否知道是哪个编号的按钮被按下了。如果一个饮料编号对应多种饮料，或者多种饮料对应同一个编号，那“反向操作”就会出现问题。

任何函数 $F$ 的逆关系 $F^{-1}$ 总是存在的（就是把所有有序对 $<x, y>$ 变成 $<y, x>$）。但这个逆关系 $F^{-1}$ **不一定是函数**。

*   **什么时候 $F^{-1}$ 是函数？**
    *   当 $F$ 是单射时，`F^{-1}` 作为一个关系，它会满足函数的“唯一性”要求（因为不同的输入有不同的输出，反过来，每个输出也只会对应一个输入）。
    *   当 $F$ 是满射时，`dom F^{-1}` 就会是整个共定义域 $B$（因为每个 $B$ 中的元素都被 $A$ 中的元素射中）。
    *   所以，**反函数存在的充要条件是原函数是双射。**

***定理 8.4 (反函数是双射)***
设 $f: A \to B$ 是双射的，则 $f^{-1}: B \to A$ 也是双射的。
*   **直观：** 一一对应的关系，反过来也一定是一一对应的关系。

#### 2.4 反函数的性质——“抵消”效应

如果一个函数 $f$ 把 $x$ 变成了 $y$，那么它的反函数 $f^{-1}$ 就能把 $y$ 变回 $x$。

***定理 8.5 (反函数的“抵消”效应)***
设 $f: A \to B$ 是双射的，则
*   $f^{-1} \circ f = I_A$ (先 $f$ 再 $f^{-1}$，回到 $A$ 中的原点)
*   $f \circ f^{-1} = I_B$ (先 $f^{-1}$ 再 $f$，回到 $B$ 中的原点)

**例 (求复合函数和反函数)：**
设 $f: \mathbb{R} \to \mathbb{R}$, $g: \mathbb{R} \to \mathbb{R}$。
$$ f(x) = \begin{cases} x^2 & x \ge 3 \\ 0 & x < 3 \end{cases} \quad g(x) = x+2 $$
求 $f \circ g$, $g \circ f$。如果 $f$ 和 $g$ 存在反函数，求出它们的反函数。

**解：**
1.  **求 $f \circ g$：** (先 $f$ 后 $g$)
    *   $(f \circ g)(x) = g(f(x))$
    *   根据 $f(x)$ 的定义，分两种情况：
        *   **情况 1：$x \ge 3$**
            *   $f(x) = x^2$
            *   $g(f(x)) = g(x^2) = x^2 + 2$
        *   **情况 2：$x < 3$**
            *   $f(x) = 0$
            *   $g(f(x)) = g(0) = 0 + 2 = 2$
    *   所以：
        $$ (f \circ g)(x) = \begin{cases} x^2+2 & x \ge 3 \\ 2 & x < 3 \end{cases} $$

2.  **求 $g \circ f$：** (先 $g$ 后 $f$)
    *   $(g \circ f)(x) = f(g(x)) = f(x+2)$
    *   根据 $f(x)$ 的定义，我们需要看 $g(x) = x+2$ 的值是 $\ge 3$ 还是 $< 3$。
        *   **情况 1：$g(x) \ge 3 \Rightarrow x+2 \ge 3 \Rightarrow x \ge 1$**
            *   此时 $f(g(x)) = (g(x))^2 = (x+2)^2$
        *   **情况 2：$g(x) < 3 \Rightarrow x+2 < 3 \Rightarrow x < 1$**
            *   此时 $f(g(x)) = 0$
    *   所以：
        $$ (g \circ f)(x) = \begin{cases} (x+2)^2 & x \ge 1 \\ 0 & x < 1 \end{cases} $$

3.  **判断 $f$ 和 $g$ 是否存在反函数：**
    *   **函数 $f(x)$：**
        *   **单射性：**
            *   对于 $x<3$，`f(x) = 0`。例如 $f(1)=0, f(0)=0, f(-100)=0$。显然，不同的输入可以有相同的输出 (都是0)。
            *   所以 $f$ **不是单射**。
        *   **满射性：**
            *   $f(x)$ 的值域：当 $x \ge 3$ 时，$f(x)=x^2 \ge 9$。当 $x < 3$ 时，$f(x)=0$。
            *   所以 $\text{ran } f = \{0\} \cup [9, +\infty)$。
            *   共定义域是 $\mathbb{R}$。显然 $\text{ran } f \ne \mathbb{R}$ (例如，1 就不在值域中)。
            *   所以 $f$ **不是满射**。
        *   **结论：** $f$ 既不是单射也不是满射，因此**不存在反函数**。

    *   **函数 $g(x) = x+2$：**
        *   **单射性：**
            *   假设 $g(x_1) = g(x_2)$。
            *   $x_1+2 = x_2+2 \Rightarrow x_1 = x_2$。
            *   所以 $g$ **是单射**。
        *   **满射性：**
            *   任取 $y \in \mathbb{R}$ (共定义域)。
            *   令 $y = x+2 \Rightarrow x = y-2$。
            *   对于任意 $y \in \mathbb{R}$，我们都能找到一个 $x = y-2 \in \mathbb{R}$ 使得 $g(x)=y$。
            *   所以 $g$ **是满射**。
        *   **结论：** $g$ 既是单射又是满射，因此**是双射，存在反函数**。

4.  **求 $g$ 的反函数 $g^{-1}$：**
    *   设 $y = g(x) = x+2$。
    *   为了求反函数，我们解出 $x$ 关于 $y$ 的表达式：$x = y-2$。
    *   然后将 $y$ 换成 $x$（习惯性表示）：$g^{-1}(x) = x-2$。
    *   其定义域和值域都是 $\mathbb{R}$。

---

### 三、集合的等势与优势——“比较大小”的艺术

在数学中，我们不仅要知道集合的元素有多少（基数），还要知道如何比较**无限集合**的大小。这不再是简单的数数，而是一种更抽象的“匹配”过程。

#### 3.1 集合的等势——“一对一”的对应

你有没有想过，一个房间里的椅子数量和一个班级里的学生数量如何比较？最直接的方法就是让每个学生都坐到一把椅子上，如果刚好坐满，没有多余的椅子，也没有站着的学生，那么学生数量就和椅子数量一样。这就是“等势”的直观想法。

***定义 8.8 (等势)***
设 $A, B$ 是集合，如果存在从 $A$ 到 $B$ 的**双射函数**，就称 $A$ 和 $B$ 是**等势**的，记作 $A \approx B$。如果 $A$ 不与 $B$ 等势，则记作 $A \not\approx B$。

*   **核心思想：** 通过双射函数建立**一一对应**关系。这是比较无限集合“大小”的唯一可靠方式。

**集合等势的实例 (非常重要！)：**

**(1) $\mathbb{Z} \approx \mathbb{N}$ (整数集与自然数集等势)**
*   **直观：** 整数有负数、正数和零，看起来比自然数（通常指非负整数）“多”得多。但我们可以建立一一对应！
*   **双射函数 $f: \mathbb{Z} \to \mathbb{N}$ (这里 $\mathbb{N}=\{0, 1, 2, ...\}$)：**
    $$ f(x) = \begin{cases} 2x & x \ge 0 \\ -2x - 1 & x < 0 \end{cases} $$
    *   **验证：**
        *   $f(0)=0, f(1)=2, f(2)=4, \dots$ (映射到所有偶数)
        *   $f(-1)=2-1=1, f(-2)=4-1=3, \dots$ (映射到所有奇数)
    *   这个函数把非负整数映射到偶数，把负整数映射到奇数。由于每个自然数（偶数或奇数）都有唯一的整数对应，且每个整数都有唯一的自然数对应，所以 $f$ 是双射。
*   **启示：** 整数和自然数一样“多”！这种反直觉的结果是研究无限集合的魅力所在。

**(2) $\mathbb{N} \times \mathbb{N} \approx \mathbb{N}$ (自然数对集与自然数集等势)**
*   **直观：** 看起来像二维平面上的点，肯定比一维线上的点“多”啊？但它们也是一样“多”的！
*   **双射函数 $f: \mathbb{N} \times \mathbb{N} \to \mathbb{N}$ (这里 $\mathbb{N}=\{0, 1, 2, ...\}$)：**
    $$ f(<m, n>) = \frac{(m+n+1)(m+n)}{2} + m $$
*   **思路：** 想象把所有自然数对 $<m, n>$ 沿着对角线排列，然后沿着对角线一条一条地数过去。
    *   <0,0> 对应 0
    *   <1,0> 对应 1
    *   <0,1> 对应 2
    *   <2,0> 对应 3
    *   <1,1> 对应 4
    *   <0,2> 对应 5
    *   ...
    *   这个公式就是计算这个“数”的编号。$\frac{(m+n+1)(m+n)}{2}$ 是前面所有对角线上的元素总数，再加上当前对角线上的 $m$ 的偏移量。
*   **启示：** 两个无限可数集的笛卡尔积仍然是可数的！这在理论计算机科学中非常重要，因为我们可以用自然数来编码任何“有限串”的信息（例如程序、数据）。

**(3) $\mathbb{N} \approx \mathbb{Q}$ (自然数集与有理数集等势)**
*   **直观：** 有理数在数轴上是稠密的，任何两个有理数之间都有无数个有理数。看起来比自然数多太多了！
*   **思路：** 采用类似的“蛇形排列”法。将所有有理数 $p/q$（$p, q$ 为整数且 $q > 0$）排成一个无限表格。然后沿着对角线遍历，跳过重复的。
    *   表格的行代表 $p$ (可以是从 $0, \pm 1, \pm 2, \dots$)，列代表 $q$ (可以是从 $1, 2, 3, \dots$)。
    *   在计数时，只考虑每个有理数的第一次出现（例如 $1/2$ 已经数过了，就跳过 $2/4, 3/6$ 等）。
*   **启示：** 有理数集也是可数的！这再次颠覆直觉，因为有理数看起来比自然数“稠密”得多。

**(4) $(0,1) \approx \mathbb{R}$ (开区间与实数集等势)**
*   **直观：** $(0,1)$ 区间是有限长度的，而 $\mathbb{R}$ 是无限长度的。
*   **双射函数 $f: (0,1) \to \mathbb{R}$：**
    *   $f(x) = \tan(\pi(x - 1/2))$
    *   **思路：** `tan` 函数的周期性使得它在 $(-\pi/2, \pi/2)$ 上可以把整个实数轴覆盖。我们将 $(0,1)$ 线性映射到 $(-\pi/2, \pi/2)$ 即可。
        *   $x \in (0,1)$
        *   $x - 1/2 \in (-1/2, 1/2)$
        *   $\pi(x - 1/2) \in (-\pi/2, \pi/2)$
        *   这个函数就是双射。
*   **启示：** 尽管长度有限，开区间 $(0,1)$ 上的点和整个实数轴上的点一样多！

**(5) $[0,1] \approx (0,1)$ (闭区间与开区间等势)**
*   **直观：** 闭区间比开区间多了两个端点（0和1）。
*   **双射函数 $f: [0,1] \to (0,1)$：** (这是一个巧妙的构造，用到前面“可数集合”的性质)
    *   **常用方法：** 找出 $A$ 中的一个“可数”集合 $C$, $B$ 中的一个“可数”集合 $D$, 使得 $C \subset D$ 且 $A-C = B-D$。此时 $C$ 与 $D$ 建立双射，而 $A-C$ 与 $B-D$ 建立恒等映射 (从而也是双射)。
    *   **理由：** 任何两个无限可数的集合都可以建立双射。
    *   **构造：**
        *   令 $C = \{0, 1, 1/2, 1/3, 1/4, \dots\}$ (闭区间中的特殊点，包括 0 和 1)。这是一个可数集。
        *   令 $D = \{1/2, 1/3, 1/4, \dots\}$ (开区间中对应的一系列点)。这也是一个可数集。
        *   现在，我们定义 $f: [0,1] \to (0,1)$ 如下：
            $$ f(x) = \begin{cases} 1/2 & x=0 \\ 1/2^{n+1} & x=1/2^n, n \ge 0 \text{ (即 } x \in C \text{ 且 } x \ne 0, 1 \text{时， } f(x) = x/2) \\ \text{? } & x=1 \text{ (1 也要处理)} \\ \end{cases} $$
            *   讲义中给出的函数：
                $$ f(x) = \begin{cases} 1/2 & x=0 \\ 1/2^2 & x=1 \\ 1/2^{n+2} & x=1/2^n, n=1,2,\dots \\ x & x \ne 0, 1, 1/2^n, n=1,2,\dots \end{cases} $$
            *   **解析：**
                *   $f(0) = 1/2$
                *   $f(1) = 1/4$
                *   $f(1/2) = 1/8$
                *   $f(1/4) = 1/16$
                *   ...
                *   这个函数把 $0, 1, 1/2, 1/4, \dots$ 这些点**“挤压”**到 $(0,1)$ 中的一个子集 $\{1/2, 1/4, 1/8, \dots\}$。
                *   而对于闭区间 $[0,1]$ 中除了这些特殊点以外的元素，它们直接映射到自身 ($f(x)=x$)。
                *   例如，0.3 在 $[0,1]$ 中，且不是特殊点，那么 $f(0.3)=0.3$。
                *   通过这种方式，我们把 $0$ 和 $1$ 这两个多出来的点“吸纳”进了那个可数序列，完美地填补了空缺，从而建立双射。

**(6) $[0,1] \approx [a,b]$ ($a < b$)**
*   **思路：** 线性伸缩和平移。
*   **双射函数 $f: [0,1] \to [a,b]$：**
    *   $f(x) = (b-a)x + a$
    *   当 $x=0$ 时，$f(0)=a$。
    *   当 $x=1$ 时，$f(1)=b$。
    *   中间的值也是线性地映射过去。这显然是双射。
*   类似地，$(0,1) \approx (a,b)$，$f(x) = (b-a)x + a$。

**(7) $P(A) \approx \{0,1\}^A$ (集合的幂集与特征函数集等势)**
*   **证明：**
    *   **构造函数 $f: P(A) \to \{0,1\}^A$：**
        *   对于 $P(A)$ 中的任意子集 $A' \subseteq A$，定义 $f(A') = \chi_{A'}$。
        *   这里 $\chi_{A'}$ 就是 $A'$ 的特征函数（我们前面已经定义过）。
    *   **证明 $f$ 是单射：**
        *   假设 $f(A_1) = f(A_2)$，即 $\chi_{A_1} = \chi_{A_2}$。
        *   这意味着对于任何 $a \in A$，$\chi_{A_1}(a) = \chi_{A_2}(a)$。
        *   如果 $\chi_{A_1}(a) = 1$，那么 $a \in A_1$ 且 $a \in A_2$。
        *   如果 $\chi_{A_1}(a) = 0$，那么 $a \notin A_1$ 且 $a \notin A_2$。
        *   这说明 $A_1$ 和 $A_2$ 包含完全相同的元素，因此 $A_1 = A_2$。
        *   所以 $f$ 是单射。
    *   **证明 $f$ 是满射：**
        *   任取 $g \in \{0,1\}^A$ (即 $g: A \to \{0,1\}$ 是一个函数)。
        *   我们需要找到一个 $B \in P(A)$，使得 $f(B) = g$，即 $\chi_B = g$。
        *   **构造 $B$：** 令 $B = \{x \mid x \in A \land g(x) = 1\}$。
        *   这个 $B$ 显然是 $A$ 的一个子集（即 $B \in P(A)$）。
        *   现在我们验证 $\chi_B = g$：
            *   对于任何 $a \in A$：
                *   如果 $a \in B$，那么根据 $B$ 的定义，$g(a)=1$。同时，根据特征函数的定义，$\chi_B(a)=1$。所以 $\chi_B(a) = g(a)$。
                *   如果 $a \notin B$，那么根据 $B$ 的定义，$g(a)=0$。同时，根据特征函数的定义，$\chi_B(a)=0$。所以 $\chi_B(a) = g(a)$。
        *   因此，$\chi_B = g$，这说明 $f$ 是满射。
*   **结论：** $f$ 是双射，所以 $P(A) \approx \{0,1\}^A$。
*   **高观点导航：** 这里的 $\{0,1\}^A$ 常常被称为 $2^A$。所以 $P(A)$ 与 $2^A$ 等势，这解释了为什么对于有限集 $A$，它的幂集大小是 $2^{|A|}$。这个结论推广到了无限集，意味着一个集合的幂集总是比原集合“大”。

**等势的性质：**
等势关系是一种**等价关系**。

***定理 8.6 (等势的性质)***
设 $A, B, C$ 是任意集合，
(1) **自反性：** $A \approx A$。 (恒等函数 $I_A$ 就是从 $A$ 到 $A$ 的双射)
(2) **对称性：** 若 $A \approx B$，则 $B \approx A$。 (如果 $f: A \to B$ 是双射，那么它的反函数 $f^{-1}: B \to A$ 也是双射)
(3) **传递性：** 若 $A \approx B$, $B \approx C$，则 $A \approx C$。 (如果 $f: A \to B$ 和 $g: B \to C$ 都是双射，那么它们的复合函数 $f \circ g: A \to C$ 也是双射)

#### 3.2 重要的等势或不等势的结果——谁更大？

我们已经看到了一些反直觉的等势结果。现在，是时候引入“谁更大”的概念了。

**1. 等势结果 (总结前面提到的)：**
*   $\mathbb{N} \approx \mathbb{Z} \approx \mathbb{Q} \approx \mathbb{N} \times \mathbb{N}$ (所有这些集合都与自然数集等势，它们都是**可数无限集**)。
*   任何实数区间都与实数集合 $\mathbb{R}$ 等势（例如 $(0,1) \approx \mathbb{R}$, $[0,1] \approx (0,1)$, $[a,b] \approx [0,1]$）。

**2. 不等势的结果 (康托定理，划时代的发现)：**

***定理 8.7 (康托定理)***
(1) $\mathbb{N} \not\approx \mathbb{R}$ (自然数集不与实数集等势)。
(2) 对任意集合 $A$ 都有 $A \not\approx P(A)$ (任何集合都不与它的幂集等势)。

*   **直观：** $\mathbb{R}$ 上的点比 $\mathbb{N}$ 上的点“多得多”；一个集合的子集比它本身的元素“多得多”。康托定理用严格的数学方法证明了这些直觉。

**证明思路 (康托的对角线方法)：**

**(1) 证明 $\mathbb{N} \not\approx \mathbb{R}$：**
*   **策略：** 反证法。假设存在从 $\mathbb{N}$ 到 $\mathbb{R}$ 的双射函数 $f$，然后构造一个实数 $y \in \mathbb{R}$，使得 $y$ 不在 $f$ 的像中，从而 $f$ 不可能是满射，与假设矛盾。
*   **具体步骤 (只需证明任何函数 $f: \mathbb{N} \to [0,1]$ 都不是满射，因为 $[0,1] \approx \mathbb{R}$)：**
    *   首先，规定 $[0,1]$ 中数的表示。对任意 $x \in [0,1]$，令 $x = 0.x_1x_2x_3\dots$ (十进制表示)。
    *   为了避免表示不唯一性 (例如 $0.500\dots = 0.499\dots$)，我们规定**不允许在某位（比如第 $i$ 位为 $0$）之后有无数个 $9$ 的情况**。如果遇到这种情况，则将 $x$ 的第 $i$ 位变成 $1$，而后面全是 $0$ (例如 $0.4999\dots$ 统一表示为 $0.5000\dots$)。这确保了每个实数在 $[0,1]$ 中有唯一的十进制表示。
    *   现在，假设 $f: \mathbb{N} \to [0,1]$ 是一个双射函数。我们可以列出它的所有函数值：
        $f(0) = 0.a_{01}a_{02}a_{03}\dots$
        $f(1) = 0.a_{11}a_{12}a_{13}\dots$
        $f(2) = 0.a_{21}a_{22}a_{23}\dots$
        $\dots$
        $f(n) = 0.a_{n1}a_{n2}a_{n3}\dots$
        $\dots$ (这里 $a_{ij}$ 表示第 $i$ 个实数的第 $j$ 位小数)
    *   **构造一个不在列表中的实数 $y \in [0,1]$：**
        *   令 $y = 0.b_1b_2b_3\dots$
        *   我们定义 $b_i$ 如下：
            *   如果 $a_{ii} = 1$，则 $b_i = 2$。
            *   如果 $a_{ii} \ne 1$，则 $b_i = 1$。
        *   （你讲义中的选择是 $b_i \ne a_{ii}$。例如，如果 $a_{ii}=5$, $b_i=6$；如果 $a_{ii}=9$, $b_i=0$。这也能确保 $b_i \ne a_{ii}$ 且避免无限 9 的情况。）
        *   这样构造的 $y$ 满足 $0 < y < 1$。
    *   **证明 $y$ 不在 $f$ 的像中：**
        *   考虑列表中的任意一个数 $f(n)$。
        *   $y$ 的第 $n+1$ 位小数 $b_{n+1}$ (如果你从 0 开始计数的话) 与 $f(n)$ 的第 $n+1$ 位小数 $a_{n, n+1}$ 是**不同**的。
        *   因此，$y \ne f(n)$ 对于任何 $n \in \mathbb{N}$ 都成立。
        *   这就推出 $y \notin \text{ran } f$，即 $f$ 不是满射。
    *   **矛盾：** 这与我们假设 $f$ 是双射（即满射）相矛盾。
*   **结论：** 从 $\mathbb{N}$ 到 $[0,1]$ 不存在双射函数，因此 $\mathbb{N} \not\approx \mathbb{R}$。

**(2) 证明对任意集合 $A$ 都有 $A \not\approx P(A)$：**
*   **策略：** 同样采用反证法。假设存在从 $A$ 到 $P(A)$ 的双射函数 $g$，然后构造一个 $B \in P(A)$ (即 $A$ 的一个子集)，使得 $B$ 不在 $g$ 的像中，从而 $g$ 不可能是满射，与假设矛盾。
*   **具体步骤：**
    *   假设 $g: A \to P(A)$ 是一个双射函数。
    *   **构造一个子集 $B \subseteq A$：**
        *   $B = \{x \mid x \in A \land x \notin g(x)\}$
        *   **直观理解：** 对于 $A$ 中的每个元素 $x$，我们考虑它是否属于 $g(x)$ (注意 $g(x)$ 是 $A$ 的一个子集)。
            *   如果 $x$ 属于 $g(x)$，那么我们就**不把 $x$ 放到 $B$ 里**。
            *   如果 $x$ 不属于 $g(x)$，那么我们就**把 $x$ 放到 $B$ 里**。
    *   **证明 $B$ 不在 $g$ 的像中：**
        *   我们断言，对于任何 $x_0 \in A$，都有 $g(x_0) \ne B$。
        *   **反证法：** 假设存在某个 $x_0 \in A$，使得 $g(x_0) = B$。
        *   现在我们考虑 $x_0$ 这个元素本身，它是否属于集合 $B$ 呢？
            *   **情况 1：** 如果 $x_0 \in B$。
                *   根据 $B$ 的定义 ($B = \{x \mid x \in A \land x \notin g(x)\}$)，如果 $x_0 \in B$，那么必然有 $x_0 \notin g(x_0)$。
                *   但这与我们假设的 $g(x_0) = B$ (从而 $x_0 \in g(x_0)$) 矛盾！
            *   **情况 2：** 如果 $x_0 \notin B$。
                *   根据 $B$ 的定义，如果 $x_0 \notin B$，那么必然有 $x_0 \in g(x_0)$。
                *   但这与我们假设的 $g(x_0) = B$ (从而 $x_0 \notin g(x_0)$) 矛盾！
        *   两种情况都导致矛盾，这说明我们的假设“存在 $x_0 \in A$ 使得 $g(x_0) = B$”是错误的。
        *   因此，不存在任何 $x \in A$ 使得 $g(x) = B$，即 $B \notin \text{ran } g$。
*   **矛盾：** 这与我们假设 $g$ 是双射（即满射）相矛盾。
*   **结论：** 从 $A$ 到 $P(A)$ 不存在双射函数，因此 $A \not\approx P(A)$。

**总结：**
*   **若需证明 $A \not\approx B$：**
    *   我们只需要证明任何函数 $g: A \to B$ 都不是满射的。
    *   或 任何函数 $g: B \to A$ 都不是满射的。
*   **判断策略：** 得预先大致判断下 $A$ 和 $B$ 的势哪个大些。如果 $|A| < |B|$，用前一个证明 (从小的到大的，证明无法满射)；否则用后一个 (从大的到小的，证明无法满射)。

#### 3.3 集合的优势——“至少不小于”的比较

等势是“相等”，那“优势”就是“不小于”。

***定义 8.9 (优势)***
(1) 设 $A, B$ 是集合，如果存在从 $A$ 到 $B$ 的**单射函数**，就称 $B$ 优势于 $A$，记作 $A \preceq \cdot B$。如果 $B$ 不是优势于 $A$，则记作 $A \not\preceq \cdot B$。
    *   **直观：** 如果能把 $A$ 的元素不重复地映射到 $B$ 中，即使 $B$ 中有剩余元素，也说明 $B$ 至少不会比 $A$ 小。
(2) 设 $A, B$ 是集合，若 $A \preceq \cdot B$ 且 $A \not\approx B$，则称 $B$ **真优势**于 $A$，记作 $A \prec \cdot B$。如果 $B$ 不是真优势于 $A$，则记作 $A \not\prec \cdot B$。
    *   **直观：** 严格意义上的“大”。

**实例：**
*   $\mathbb{N} \preceq \cdot \mathbb{N}$ (恒等函数 $I_\mathbb{N}$ 是单射)
*   $\mathbb{N} \preceq \cdot \mathbb{R}$ (例如 $f(x)=x$ 是从 $\mathbb{N}$ 到 $\mathbb{R}$ 的单射)
*   $A \preceq \cdot P(A)$ (根据康托定理，存在一个从 $A$ 到 $P(A)$ 的单射 $f(x) = \{x\}$，但不存在双射，所以 $A \prec \cdot P(A)$)
*   $\mathbb{R} \not\preceq \cdot \mathbb{N}$ (实数集不优势于自然数集，因为 $\mathbb{R}$ 比 $\mathbb{N}$ 大)

**优势的性质：**

***定理 8.8 (优势的性质)***
设 $A, B, C$ 是任意的集合，则
(1) **自反性：** $A \preceq \cdot A$。 (恒等函数 $I_A$ 是单射)
(2) **反对称性 (Schröder-Bernstein 定理)：** 若 $A \preceq \cdot B$ 且 $B \preceq \cdot A$，则 $A \approx B$。
    *   **核心思想：** 如果 $A$ 可以单射到 $B$，且 $B$ 也可以单射到 $A$，那么 $A$ 和 $B$ 之间就存在双射。这个定理的证明比较复杂，超出了离散数学基础课程的范围，但结论非常重要。它简化了等势的证明：你不需要直接构造双射，只需要构造两个方向的单射即可。
(3) **传递性：** 若 $A \preceq \cdot B$ 且 $B \preceq \cdot C$，则 $A \preceq \cdot C$。
    *   **证明：**
        *   因为 $A \preceq \cdot B$，存在从 $A$ 到 $B$ 的单射 $f: A \to B$。
        *   因为 $B \preceq \cdot C$，存在从 $B$ 到 $C$ 的单射 $g: B \to C$。
        *   根据定理 8.2(2) (函数复合的性质)，如果 $f$ 和 $g$ 都是单射，那么它们的复合函数 $f \circ g: A \to C$ 也是单射。
        *   根据优势的定义，如果存在从 $A$ 到 $C$ 的单射，那么 $A \preceq \cdot C$。
    *   **结论：** 优势关系是一种**偏序关系**。

**例 (证明 $\{0,1\}^\mathbb{N} \approx [0,1)$)：**
*   **目标：** 证明这两个集合等势。根据 Schröder-Bernstein 定理，我们只需要证明 $A \preceq \cdot B$ 和 $B \preceq \cdot A$。
    *   即，找到一个从 $\{0,1\}^\mathbb{N}$ 到 $[0,1)$ 的单射，和一个从 $[0,1)$ 到 $\{0,1\}^\mathbb{N}$ 的单射。

**1. 构造从 $[0,1)$ 到 $\{0,1\}^\mathbb{N}$ 的单射 $f$：**
*   **思路：** 将 $[0,1)$ 中的每个实数用二进制小数表示，然后将其二进制序列映射到 $\{0,1\}^\mathbb{N}$ 中的一个函数。
*   **细节：**
    *   对任意 $x \in [0,1)$，它的二进制表示是 $0.x_1x_2x_3\dots$。
    *   **处理表示不唯一性：** 为了确保唯一性，我们规定**不允许出现连续无数个 $1$**。例如，$0.10111\dots$ 应该表示为 $0.11000\dots$。这避免了 $0.a_1a_2\dots111\dots = 0.a_1a_2(\dots+1)000\dots$ 的情况。
    *   定义 $f(x) = t_x$，其中 $t_x: \mathbb{N} \to \{0,1\}$ 是一个函数，满足 $t_x(n) = x_{n+1}$ (即 $t_x$ 的第 $n$ 个值是 $x$ 的二进制小数的第 $n+1$ 位)。
    *   **证明 $f$ 是单射：** 如果 $x \ne y$，那么它们的二进制表示必然不同。由于我们排除了无限 1 的情况，所以 $x$ 和 $y$ 有唯一的二进制表示。因此 $t_x \ne t_y$，即 $f(x) \ne f(y)$。所以 $f$ 是单射。

**2. 构造从 $\{0,1\}^\mathbb{N}$ 到 $[0,1)$ 的单射 $g$：**
*   **思路：** 将 $\{0,1\}^\mathbb{N}$ 中的每个函数视为一个二进制序列，然后将其解释为一个十进制小数。
*   **细节：**
    *   对任意 $t \in \{0,1\}^\mathbb{N}$，即 $t: \mathbb{N} \to \{0,1\}$。
    *   定义 $g(t) = 0.t(0)t(1)t(2)\dots$ (这里是十进制表示，不是二进制)。
    *   例如，如果 $t = \{<0,1>, <1,0>, <2,1>, <3,1>, \dots\}$，那么 $g(t) = 0.1011\dots$ (一个十进制小数)。
    *   **证明 $g$ 是单射：**
        *   假设 $g(t_1) = g(t_2)$。这意味着它们对应的十进制小数是相等的。
        *   由于十进制表示的唯一性 (对于有限小数和无限非循环小数)，这意味着 $t_1(n)$ 必须等于 $t_2(n)$ 对于所有 $n$。
        *   所以 $t_1 = t_2$。因此 $g$ 是单射。
    *   **重要性：** 这种将二进制序列解释为十进制小数的方法，巧妙地避免了二进制表示中“无限 1”和“无限 0”对应的数相同的问题。通过转换为十进制，每个不同的二进制序列都对应一个唯一的十进制小数。

*   **结论：** 既然我们找到了两个方向的单射，根据 Schröder-Bernstein 定理，**$\{0,1\}^\mathbb{N} \approx [0,1)$**。
*   **进一步：** 由于 $[0,1) \approx \mathbb{R}$，根据等势的传递性，我们最终得到 **$\{0,1\}^\mathbb{N} \approx \mathbb{R}$**。

**总结：重要的等势或优势的结果 (基数大小的排列)：**
*   **可数无限集：** $\mathbb{N} \approx \mathbb{Z} \approx \mathbb{Q} \approx \mathbb{N} \times \mathbb{N}$。这些集合的基数都是 $\aleph_0$ (阿列夫零)。
*   **不可数无限集 (与实数集等势)：** $\mathbb{R} \approx [a,b] \approx (c,d) \approx \{0,1\}^\mathbb{N} \approx P(\mathbb{N})$。这些集合的基数都是 $\aleph$ (阿列夫一，通常用 $\mathfrak{c}$ 表示，代表连续统的势)。
*   **一般性的等势：** $\{0,1\}^A \approx P(A)$。
*   **真优势 (严格“大于”)：** $\mathbb{N} \prec \cdot \mathbb{R}$ (即 $\aleph_0 < \aleph$)。
*   **真优势 (一般性)：** $A \prec \cdot P(A)$。

**高观点导航：**
*   **连续统假设 (Continuum Hypothesis):** 康托尔证明了 $\aleph_0 < \aleph$，并且 $\aleph = 2^{\aleph_0}$。连续统假设提出，在 $\aleph_0$ 和 $2^{\aleph_0}$ 之间，没有其他的无限基数。也就是说，$2^{\aleph_0}$ 就是下一个更大的基数 $\aleph_1$。这个假设在数学中是独立于 ZFC 公理体系的，既不能被证明也不能被证伪。
*   **基数运算：** 集合的等势概念引入了“基数”的概念，并可以定义基数的加法、乘法、指数运算，从而发展出无限集合的算术。

---

### 四、集合的基数——“数”的推广

我们已经直观地比较了无限集合的大小，现在要将其形式化为“基数”这个概念。

#### 4.1 自然数与自然数集合——基石与计数

在定义基数之前，我们先以集合论的方式构建自然数，这为我们后续理解基数奠定了基础。

***定义 (自然数的集合论定义)***
设 $a$ 为集合，称 $a \cup \{a\}$ 为 $a$ 的后继，记作 $a^+$。
如下定义自然数：
*   $0 = \emptyset$ (空集)
*   $1 = 0^+ = \emptyset^+ = \emptyset \cup \{\emptyset\} = \{\emptyset\} = \{0\}$
*   $2 = 1^+ = \{\emptyset\}^+ = \{\emptyset\} \cup \{\{\emptyset\}\} = \{\emptyset, \{\emptyset\}\} = \{0, 1\}$
*   $3 = 2^+ = \{\emptyset, \{\emptyset\}\}^+ = \{\emptyset, \{\emptyset\}, \{\emptyset, \{\emptyset\}\}\} = \{0, 1, 2\}$
*   ...
*   $n = \{0, 1, \dots, n-1\}$

**高观点导航：** 这种构造方式被称为**冯·诺依曼序数**。它确保了每个自然数 $n$ 都是一个包含了前 $n$ 个自然数（从 $0$ 到 $n-1$）的集合。这意味着 $m < n \iff m \in n \iff m \subset n$。

**自然数的性质：**
(1) 对任何自然数 $n$ 有 $n \approx n$ (自反性)。
(2) 对任何自然数 $n, m$，若 $m$ 是 $n$ 的真子集，则 $m \ne n$ (这实际上是序数的性质，自然数作为序数是良序的)。
(3) 对任何自然数 $n, m$，若 $m \in n$，则 $m \subseteq n$。 (由冯·诺依曼序数定义直接得出)
(4) 对任何自然数 $n$ 和 $m$，以下三个式子：$m \in n$, $m \approx n$, $n \in m$ 必成立其一且仅成立其一。这个性质称为**自然数的三歧性** (Trichotomy)。
    *   **直观：** 任何两个自然数要么一个比另一个小，要么它们相等，要么一个比另一个大。

**自然数的相等与大小顺序：**
对任何自然数 $m$ 和 $n$，
*   $m = n \Leftrightarrow m \approx n$ (它们等势，且是唯一的自然数)。
*   $m < n \Leftrightarrow m \in n$ (一个自然数是另一个自然数的元素)。

#### 4.2 有穷集和无穷集——有限与无限的界限

***定义 8.11 (有穷集和无穷集)***
一个集合是**有穷的**当且仅当它与某个**自然数**等势；
如果一个集合不是有穷的，就称作**无穷集**。

**实例：**
*   $\{a, b, c\}$ 是有穷集，因为 $\{a, b, c\} \approx \{0, 1, 2\} = 3$。
*   $\mathbb{N}$ 和 $\mathbb{R}$ 都是无穷集，因为没有自然数与 $\mathbb{N}$ 或 $\mathbb{R}$ 等势（我们已经证明了 $\mathbb{N} \not\approx n$ 对于任何自然数 $n$）。

**性质：** 任何有穷集只与唯一的自然数等势。这使得我们可以用自然数来表示有穷集的大小。

#### 4.3 基数——大小的抽象量度

现在，我们把“大小”这个概念推广到所有集合，包括无限集。

***定义 8.12 (集合基数的定义)***
(1) 对于有穷集合 $A$，称与 $A$ 等势的那个唯一的自然数为 $A$ 的**基数**，记作 $\text{card } A$，即 $\text{card } A = n \Leftrightarrow A \approx n$。（对于有穷集 $A$, $\text{card } A$ 也可以记作 $|A|$）
    *   **是否严谨？** 是严谨的。因为我们已经用集合论的方式定义了自然数，并且证明了每个有穷集都唯一地等势于某个自然数。
(2) 自然数集合 $\mathbb{N}$ 的基数记作 $\aleph_0$ (读作阿列夫零)，即 $\text{card } \mathbb{N} = \aleph_0$。
    *   $\aleph_0$ 是最小的无限基数。
(3) 实数集 $\mathbb{R}$ 的基数记作 $\aleph$ (读作阿列夫，通常用 $\mathfrak{c}$ 表示连续统的势)，即 $\text{card } \mathbb{R} = \aleph$。

**基数的相等和大小：**
基数的比较方式直接继承自集合等势和优势的定义。

***定义 8.13 (基数的相等和大小)***
设 $A, B$ 为集合，则
(1) $\text{card } A = \text{card } B \Leftrightarrow A \approx B$
(2) $\text{card } A \le \text{card } B \Leftrightarrow A \preceq \cdot B$
(3) $\text{card } A < \text{card } B \Leftrightarrow \text{card } A \le \text{card } B \land \text{card } A \ne \text{card } B$ (即 $A \preceq \cdot B \land A \not\approx B$)

**根据上一节关于势的讨论不难得到：**
*   $\text{card } \mathbb{Z} = \text{card } \mathbb{Q} = \text{card } (\mathbb{N} \times \mathbb{N}) = \aleph_0$
*   $\text{card } P(\mathbb{N}) = \text{card } \{0,1\}^\mathbb{N} = \text{card } [a,b] = \text{card } (c,d) = \aleph$ (这里 $\aleph$ 和 $\mathfrak{c}$ 指的是同一个基数)。
*   $\aleph_0 < \aleph$ (因为 $\mathbb{N} \prec \cdot \mathbb{R}$)

由于对任何集合 $A$ 都满足 $A \prec \cdot P(A)$ (康托定理)，所以有 $\text{card } A < \text{card } P(A)$。
这说明**不存在最大的基数**。我们可以不断地构造出更大的无限集合：
$\aleph_0 < \text{card } P(\mathbb{N}) < \text{card } P(P(\mathbb{N})) < \dots$

将已知（或可构造）的基数按从小到大的顺序排列就得到：
$0, 1, 2, \dots, n, \dots, \aleph_0, \aleph, \text{card } P(\mathbb{R}), \dots$
其中：
*   $0, 1, 2, \dots, n, \dots$ 是全体自然数，是**有穷基数**。
*   $\aleph_0, \aleph, \dots$ 是**无穷基数**。
*   $\aleph_0$ 是最小的无穷基数。
*   $\aleph$ 后面还有更大的基数，如 $\text{card } P(\mathbb{R})$ 等。

**证明等势不是一定要找到两个集合之间的双射：**
可以分别找出单射，再利用 Schröder-Bernstein 定理（定理 8.8(2)）就可以得到等势。这是非常强大的工具。

#### 4.4 可数集——可以被“数过来”的集合

***定义 8.14 (可数集)***
设 $A$ 为集合，若 $\text{card } A \le \aleph_0$，则称 $A$ 为**可数集**或**可列集**。

*   **直观：** 如果一个集合是可数的，这意味着它的元素可以被“排队”，然后一个一个地编号（与自然数建立一一对应或有限对应）。
*   **实例：**
    *   有穷集：$\{a, b, c\}$, $5$ (基数为 3, 5)。
    *   无穷可数集：整数集 $\mathbb{Z}$, 有理数集 $\mathbb{Q}$, $\mathbb{N} \times \mathbb{N}$ (基数都是 $\aleph_0$)。
    *   实数集 $\mathbb{R}$ 不是可数集，它与 $\aleph_0$ 不等势。与 $\mathbb{R}$ 等势的集合也不是可数集。

**关于可数集有下面的性质：**
1.  **可数集的任何子集都是可数集。** (如果大的能排队，小的自然也能排队)
2.  **两个可数集的并是可数集。** (把两个队列的元素交叉排队即可)
3.  **两个可数集的笛卡儿积是可数集。** (前面证明 $\mathbb{N} \times \mathbb{N} \approx \mathbb{N}$ 就是核心思想)
4.  **可数个可数集的并仍是可数集。** (想象一个无限的表格，每行都是一个可数集，然后用蛇形排列法遍历整个表格)
5.  **无穷集 $A$ 的幂集 $P(A)$ 不是可数集。** (根据康托定理 $A \prec \cdot P(A)$，所以 $P(A)$ 总是比 $A$ 大。如果 $A$ 是无限可数集，例如 $A=\mathbb{N}$，那么 $P(\mathbb{N})$ 就不可能是可数集，它的基数是 $\aleph$)

**例 (求集合的基数)：**
(1) $T = \{x \mid x \text{ 是单词 “BASEBALL” 中的字母}\}$
    *   **解：** $T = \{B, A, S, E, L\}$ (注意去除重复字母)。所以 $\text{card } T = 5$。
(2) $B = \{x \mid x \in \mathbb{R} \land x^2 = 9 \land 2x = 8\}$
    *   **解：**
        *   $x^2 = 9 \Rightarrow x = 3$ 或 $x = -3$。
        *   $2x = 8 \Rightarrow x = 4$.
        *   这两个条件必须同时满足，但没有实数能同时满足 $x \in \{3, -3\}$ 且 $x=4$。
        *   所以 $B = \emptyset$ (空集)。$\text{card } B = 0$。
(3) $C = P(A)$, $A = \{1, 3, 7, 11\}$
    *   **解：** $|A|=4$。$C$ 是 $A$ 的幂集。
    *   $\text{card } C = |P(A)| = 2^{|A|} = 2^4 = 16$。

**例 (求 $\text{card } (A \times B)$)：**
设 $A, B$ 为集合，且 $\text{card } A = \aleph_0$, $\text{card } B = n$, $n$ 是自然数， $n \ne 0$。求 $\text{card } (A \times B)$。

**解 (方法一：构造双射)：**
*   因为 $\text{card } A = \aleph_0$，所以 $A$ 与 $\mathbb{N}$ 等势，我们可以将 $A$ 的元素“排队”：$A = \{a_0, a_1, a_2, \dots\}$。
*   因为 $\text{card } B = n$，所以 $B$ 是一个有 $n$ 个元素的有穷集：$B = \{b_0, b_1, \dots, b_{n-1}\}$。
*   $A \times B$ 中的元素形式为 $<a_i, b_j>$。
*   **构造函数 $f: A \times B \to \mathbb{N}$：**
    *   定义 $f(<a_i, b_j>) = in + j$。 (这里 $i$ 是 $a$ 的下标， $j$ 是 $b$ 的下标)
    *   **直观：** 这就像把 $A \times B$ 想象成一个无限的 $n$ 列的表格，然后从左到右，从上到下地数数。
        *   行 0: $<a_0, b_0>, <a_0, b_1>, \dots, <a_0, b_{n-1}>$ (编号 0 到 $n-1$)
        *   行 1: $<a_1, b_0>, <a_1, b_1>, \dots, <a_1, b_{n-1}>$ (编号 $n$ 到 $2n-1$)
        *   行 $i$: $<a_i, b_0>, <a_i, b_1>, \dots, <a_i, b_{n-1}>$ (编号 $in$ 到 $in+n-1$)
*   **证明 $f$ 是双射：**
    *   **单射：** 假设 $f(<a_{i_1}, b_{j_1}>) = f(<a_{i_2}, b_{j_2}>)$。
        *   $i_1n + j_1 = i_2n + j_2$。
        *   由于 $0 \le j_1, j_2 < n$，所以 $j_1$ 和 $j_2$ 可以看作是 $i_1n+j_1$ 和 $i_2n+j_2$ 除以 $n$ 的余数。
        *   余数唯一，所以 $j_1 = j_2$。
        *   然后 $(i_1n + j_1) - j_1 = (i_2n + j_2) - j_2 \Rightarrow i_1n = i_2n \Rightarrow i_1 = i_2$ (因为 $n \ne 0$)。
        *   所以 $<a_{i_1}, b_{j_1}> = <a_{i_2}, b_{j_2}>$。$f$ 是单射。
    *   **满射：** 任取一个自然数 $k \in \mathbb{N}$。
        *   根据带余除法，存在唯一的整数 $i, j$ 使得 $k = in + j$，其中 $0 \le j < n$。
        *   那么我们可以找到 $a_i \in A$ 和 $b_j \in B$ (因为 $A$ 和 $B$ 中的元素都有对应下标)。
        *   所以 $f(<a_i, b_j>) = k$。$f$ 是满射。
*   **结论：** $f$ 是双射，所以 $\text{card } (A \times B) = \text{card } \mathbb{N} = \aleph_0$。

**解 (方法二：利用可数集性质)：**
*   因为 $\text{card } A = \aleph_0$，所以 $A$ 是可数集。
*   因为 $\text{card } B = n$ ($n \ne 0$)，所以 $B$ 是有穷集，也是可数集。
*   根据可数集的性质 (3)，两个可数集的笛卡儿积是可数集，所以 $\text{card } (A \times B) \le \aleph_0$。
*   因为 $n \ne 0$，所以 $B$ 非空。我们可以选择 $b \in B$。
*   构造一个从 $A$ 到 $A \times B$ 的单射：$g(a) = <a, b>$。
*   所以 $\text{card } A \le \text{card } (A \times B)$，即 $\aleph_0 \le \text{card } (A \times B)$。
*   **综合：** $\text{card } (A \times B) \le \aleph_0$ 且 $\aleph_0 \le \text{card } (A \times B)$，因此 $\text{card } (A \times B) = \aleph_0$。

---

### 五、第二节：函数的复合与反函数 (习题课中的重点)

虽然这部分内容已经在前面串讲过，但习题课特别强调，说明它的重要性。

#### 5.1 证明集合等势的方法——不止一种“找双射”

习题课中总结了四种证明两个集合等势的方法，这非常重要。

**方法一：直接构造从 $A$ 到 $B$ 的双射函数。**
*   **步骤：**
    1.  给出一个从 $A$ 到 $B$ 的函数 $f: A \to B$。
    2.  证明 $f$ 的满射性。
    3.  证明 $f$ 的单射性。
*   **特点：** 这是最直接、最基础的方法，但有时构造双射函数本身很困难。
*   **证明与自然数等势：** 找到一个“数遍” $A$ 中元素的顺序。

**方法二：利用定理 8.8 (Schröder-Bernstein 定理)，构造两个单射函数 $f: A \to B$ 和 $g: B \to A$。**
*   **步骤：**
    1.  给出函数 $f: A \to B$。
    2.  证明 $f$ 是单射。
    3.  给出函数 $g: B \to A$。
    4.  证明 $g$ 是单射。
    5.  根据 Schröder-Bernstein 定理，得出 $A \approx B$。
*   **特点：** 这大大简化了证明，因为构造单射通常比构造双射容易。这是证明无限集等势的强大工具。

**方法三：利用等势的传递性。**
*   **步骤：** 如果已知 $A \approx C$ 且 $C \approx B$，则 $A \approx B$。
*   **特点：** 将复杂问题分解为已知等势的简单问题。例如，证明 $[0,1] \approx \mathbb{R}$，我们可以先证明 $[0,1] \approx (0,1)$，再证明 $(0,1) \approx \mathbb{R}$。

**方法四：直接计算 $A$ 与 $B$ 的基数，得到 $\text{card } A = \text{card } B$。**
*   **步骤：**
    1.  计算 $\text{card } A$。
    2.  计算 $\text{card } B$。
    3.  如果它们相等，则 $A \approx B$。
*   **特点：** 适用于已知基数或基数易于计算的集合。

#### 5.2 练习：可数集的性质应用

**2. 已知 $A = \{n^7 \mid n \in \mathbb{N}\}$, $B = \{n^{109} \mid n \in \mathbb{N}\}$，求下列各题：**
(1) $\text{card } A$;
(2) $\text{card } B$;
(3) $\text{card } (A \cup B)$;
(4) $\text{card } (A \cap B)$.

**解：**
(1) $\text{card } A$:
    *   构造双射函数 $f: \mathbb{N} \to A$, $f(n) = n^7$。
    *   **单射：** 若 $n_1^7 = n_2^7$，则 $n_1 = n_2$ (因为 $n \in \mathbb{N}$，函数 $x^7$ 在 $\mathbb{N}$ 上严格单调)。
    *   **满射：** 对任何 $y \in A$，由定义 $y = n^7$ 对于某个 $n \in \mathbb{N}$。所以 $f(n)=y$。
    *   因此 $f$ 是双射，$\text{card } A = \text{card } \mathbb{N} = \aleph_0$。

(2) $\text{card } B$:
    *   同理，构造双射函数 $g: \mathbb{N} \to B$, $g(n) = n^{109}$。
    *   因此 $\text{card } B = \text{card } \mathbb{N} = \aleph_0$。

(3) $\text{card } (A \cup B)$:
    *   $A$ 和 $B$ 都是可数集 (因为它们的基数都是 $\aleph_0$)。
    *   根据可数集的性质，“两个可数集的并是可数集”，所以 $\text{card } (A \cup B) \le \aleph_0$。
    *   同时，由于 $A \subseteq A \cup B$，所以 $\text{card } A \le \text{card } (A \cup B)$。
    *   即 $\aleph_0 \le \text{card } (A \cup B)$。
    *   综合上述，$\text{card } (A \cup B) = \aleph_0$。

(4) $\text{card } (A \cap B)$:
    *   $A \cap B = \{x \mid x \in A \text{ 且 } x \in B\} = \{m \mid m=n_1^7 \text{ 且 } m=n_2^{109} \text{ 对于某些 } n_1, n_2 \in \mathbb{N}\}$。
    *   这意味着 $m$ 既是某个自然数的 7 次方，又是某个自然数的 109 次方。
    *   这等价于 $m$ 是某个自然数的 **lcm(7, 109)** 次方。
    *   因为 7 和 109 都是素数，所以它们互素，$\text{lcm}(7, 109) = 7 \times 109 = 763$。
    *   所以 $A \cap B = \{n^{763} \mid n \in \mathbb{N}\}$。
    *   同理 (1)，构造双射函数 $h: \mathbb{N} \to (A \cap B)$, $h(n) = n^{763}$。
    *   因此 $\text{card } (A \cap B) = \text{card } \mathbb{N} = \aleph_0$。

**3. 已知 $\text{card } A = \aleph_0$, 且 $\text{card } B < \text{card } A$, 求 $\text{card } (A \setminus B)$。**

**解：**
*   $\text{card } A = \aleph_0$ 意味着 $A$ 是无限可数集。
*   $\text{card } B < \text{card } A$ 意味着 $\text{card } B < \aleph_0$。根据基数的定义，这意味着 $B$ 是一个**有穷集**。
    *   即存在一个自然数 $n$，使得 $\text{card } B = n$。

*   考虑 $A \setminus B$:
    *   由于 $A \setminus B \subseteq A$，所以 $\text{card } (A \setminus B) \le \text{card } A = \aleph_0$。 (即 $A \setminus B$ 也是可数集)
*   现在我们假设 $\text{card } (A \setminus B)$ 是一个有穷集 (反证法)。
    *   那么存在一个自然数 $m$，使得 $\text{card } (A \setminus B) = m$。
*   我们知道 $A = (A \setminus B) \cup B$ (因为 $A \setminus B$ 和 $B$ 是不相交的)。
*   所以 $\text{card } A = \text{card } ((A \setminus B) \cup B) = \text{card } (A \setminus B) + \text{card } B$ (对于不相交的有穷集)。
*   代入我们假设的基数：$\text{card } A = m + n$。
*   但我们已知 $\text{card } A = \aleph_0$。
*   所以我们得到 $\aleph_0 = m + n$。
*   然而，有穷数加有穷数结果仍然是有穷数 ($m+n$ 仍然是一个自然数)。
*   这就得到了 $\aleph_0 = \text{一个自然数}$，这与 $\aleph_0$ 是无穷基数的定义相矛盾。

*   **结论：** 我们的假设“$\text{card } (A \setminus B)$ 是一个有穷集”是错误的。
*   因此，$\text{card } (A \setminus B)$ 必须是无穷集。
*   又因为 $\text{card } (A \setminus B) \le \aleph_0$，所以**$\text{card } (A \setminus B) = \aleph_0$**。

**高观点导航：** 这个结论非常重要：从一个无限可数集中移除一个有限子集，其结果仍然是无限可数集。这体现了无限的“顽固性”：有限的移除不会改变其无限的“大小”。

---

同学们，今天我们深入探讨了函数的概念，从它的定义、性质、复合、反函数，一直延伸到如何用函数来比较集合的“大小”——等势与优势。我们领略了康托定理的强大，它揭示了无限集合世界中不同“量级”的存在。最后，我们精确定义了基数，并了解了可数集的特性。

这些概念不仅是离散数学的基石，更是通向更高级数学领域（如抽象代数、测度论）和计算机科学理论（如计算理论、算法分析）的桥梁。理解它们，就是在理解数学最本质的抽象和逻辑。

希望这次串讲能够帮助大家更好地理解这些知识点，而不是仅仅停留在记忆表面。请记住，每一次推导，每一个例子，都蕴含着其背后的思想。去探索“为什么”，而非仅仅“是什么”。

祝大家学习愉快！