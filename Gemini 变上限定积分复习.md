---
sr-due: 2025-05-19
sr-interval: 4
sr-ease: 270
---

#review 

>Integrals with Variable Upper Limits, can be viewed as a way to construct new functions.
>The Lower Limits, if being constant, make no difference when the functions are derived.
>If we are asked to compute such integrals, the essential of our computation is similar to ordinary *definite integrals*, except for that we should keep the $x$ , to get $F(x)$.

好的，同学！非常欢迎来到我的课堂。我是你的讲师，今天我们将一起探索高等数学中一个非常有趣且重要的概念——**变上限定积分 (Integrals with Variable Upper Limits)**。

我知道，你可能觉得之前的学习有些吃力，特别是面对一堆公式定理的时候。别担心！我的目标不是让你死记硬背，而是真正理解这些概念的来龙去脉。我们会像侦探一样，从最直观的线索出发，一步步揭开变上限定积分的神秘面纱，你会发现，数学其实可以非常自然和富有逻辑。我们将借鉴 Gilbert Strang 教授讲解线性代数时那种洞察本质的几何直觉，也会像 CS61A/B 课程那样，重视思想的建立和过程的推演。

准备好了吗？让我们开始这段思维旅程吧！

### 引入与动机 (Hook & Motivation)

想象一下你在开车，汽车的速度表显示的速度是 $v(t)$，它会随着时间 $t$ 变化。现在，我想知道从出发（比如 $t=0$ 时刻）开始，到**任意一个时刻** $x$，你总共行驶了多少距离？

我们知道，距离是速度对时间的累积。如果速度是恒定的 $v$，那么在时间 $x$ 内行驶的距离就是 $v \times x$。但现在速度 $v(t)$ 是变化的，怎么办呢？

微积分告诉我们，累积一个变化的量，需要用到积分。从 $t=0$ 到某个**固定**时刻 $T$，行驶的总距离是定积分：$$ S = \int_0^T v(t) dt $$。这个 $S$ 是一个具体的数值。

但是，我们刚才的问题是：到**任意时刻** $x$ 的总距离是多少？这个总距离，显然会随着你选择的结束时刻 $x$ 的不同而变化。也就是说，这个“总距离”本身，是**关于结束时刻 $x$ 的一个函数**！

我们把它记作 $S(x)$。那么：
$$ S(x) = \int_0^x v(t) dt $$

看，这个积分的上限 $x$ 是一个变量！这就是我们今天要讨论的主角——**变上限定积分**。

**为什么它重要？**

1.  **描述累积过程：** 很多现实问题都涉及“到某个时刻为止的总量”，比如到时间 $x$ 为止流入水库的总水量、到时间 $x$ 为止产生的总收益、到位置 $x$ 为止杆件受到的总力矩等等。变上限定积分正是描述这种**动态累积过程**的数学语言。
2.  **定义新函数：** 有些函数的导数我们知道，但它们的原函数无法用初等函数（就是我们熟悉的那些多项式、指数、对数、三角函数等）表示出来。例如，概率论中非常重要的正态分布，它的概率密度函数是 $f(x) = \frac{1}{\sqrt{2\pi}} e^{-x^2/2}$，但它的原函数（累积分布函数）就无法用初等函数写出。这时，我们就可以用变上限定积分来**定义**这个新函数：
    $$ \Phi(x) = \int_{-\infty}^x \frac{1}{\sqrt{2\pi}} e^{-t^2/2} dt $$
    （这里的下限是 $-\infty$，可以理解为从很远的地方开始积分）。变上限定积分提供了一种强大的**构造函数的工具**。
3.  **连接微分与积分的关键：** 它是理<font color="#ffff00">解和证明微积分基本定理</font> (Fundamental Theorem of Calculus, FTC) 的核心环节，深刻揭示了微分和积分这两种运算之间的**逆运算关系**。理解了它，你对整个微积分的理解会提升一个层次。

所以，学习变上限定积分，不仅仅是学会一种计算，更是理解一种重要的数学思想和工具。

### 必要知识回顾 (Prerequisite Review)

在我们深入之前，需要确保你对以下几个基础概念还有印象。不用担心记不清细节，我们快速回顾一下核心思想：

1.  **定积分 (Definite Integral):**
    *   **核心思想：** “无限细分，求和，取极限”。计算一个函数 $f(x)$ 在区间 $[a, b]$ 上的定积分 $$ \int_a^b f(x) dx $$，直观上（当 $f(x) \ge 0$ 时）代表的是函数曲线 $y=f(x)$、x轴以及直线 $x=a$ 和 $x=b$ 所围成的**曲边梯形的面积**。
    *   **计算方法（牛顿-莱布尼茨公式）：** 如果 $F(x)$ 是 $f(x)$ 的一个原函数（即 $F'(x) = f(x)$），那么 $$ \int_a^b f(x) dx = F(b) - F(a) $$。

2.  **原函数 (Antiderivative):**
    *   如果在一个区间上，函数 $F(x)$ 的导数是 $f(x)$，即 $F'(x) = f(x)$，那么 $F(x)$ 就叫做 $f(x)$ 的一个原函数。
    *   一个函数 $f(x)$ 如果有原函数，那么它有无穷多个原函数，它们之间只相差一个常数 $C$ (即 $F(x)+C$)。

3.  **函数 (Function):**
    *   一个规则，它将输入集合（定义域）中的每一个元素 $x$ 映射到输出集合（值域）中唯一的一个元素 $y$。记作 $y = f(x)$。关键在于，给定一个输入 $x$，有**唯一确定**的输出 $y$ 与之对应。

4.  **导数 (Derivative):**
    *   **核心思想：** 描述函数在某一点处变化的**瞬时速率**。几何上表示函数图像在该点处切线的斜率。
    *   **定义：** $$ f'(x) = \lim_{\Delta x \to 0} \frac{f(x+\Delta x) - f(x)}{\Delta x} $$

有这些基础印象就足够了。接下来，我们会看到变上限定积分如何将它们巧妙地联系起来。

### 直观解释与感性认识 (Intuitive Explanation)

我们再回到开车的例子：$$ S(x) = \int_0^x v(t) dt $$。这个 $S(x)$ 表示到时刻 $x$ 为止的总路程。

现在，让我们思考一个问题：当时间从 $x$ 变化一点点，比如说增加了一个微小量 $h$ ( $h > 0$ 且非常小)，总路程 $S(x)$ 会变化多少呢？

新的总路程是 $S(x+h) = \int_0^{x+h} v(t) dt$。
路程的变化量是 $\Delta S = S(x+h) - S(x)$。

利用定积分的性质（积分区间的可加性），我们知道：
$$ \int_0^{x+h} v(t) dt = \int_0^x v(t) dt + \int_x^{x+h} v(t) dt $$
所以，路程的变化量就是：
$$ \Delta S = S(x+h) - S(x) = \int_x^{x+h} v(t) dt $$

这个 $\Delta S$ 是什么？它是在 $x$ 到 $x+h$ 这段**极短**的时间内行驶的路程。

想象一下，如果 $h$ 非常非常小，那么在这段极短的时间内，速度 $v(t)$ 来不及发生太大的变化，我们可以认为它几乎是**恒定**的，大约就等于 $t=x$ 时刻的速度 $v(x)$。

那么，在这段小时间 $h$ 内行驶的路程 $\Delta S$ 就约等于：
$$ \Delta S \approx \text{速度} \times \text{时间} \approx v(x) \times h $$

换句话说：
$$ \int_x^{x+h} v(t) dt \approx v(x) \cdot h $$

现在，我们考虑总路程 $S(x)$ 关于时间 $x$ 的**变化率**，也就是它的导数 $S'(x)$。根据导数的定义：
$$ S'(x) = \lim_{h \to 0} \frac{S(x+h) - S(x)}{h} = \lim_{h \to 0} \frac{\Delta S}{h} $$

把我们刚才得到的近似关系代入：
$$ S'(x) \approx \lim_{h \to 0} \frac{v(x) \cdot h}{h} = \lim_{h \to 0} v(x) = v(x) $$

这个结果非常有趣！它告诉我们：**总路程 $S(x)$ 对时间 $x$ 的变化率，正好就是 $x$ 时刻的瞬时速度 $v(x)$！**

这完全符合我们的直觉！“总路程的变化快慢”不就是“当前的速度”吗？

**几何上的直观理解：**

考虑一个非负函数 $f(t)$。我们定义一个“面积函数” $A(x) = \int_a^x f(t) dt$，它表示从 $t=a$ 到 $t=x$ 这段区间内，曲线 $y=f(t)$ 下方的面积。

![Variable Upper Limit Integral Geometry](https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Fundamental_theorem_of_calculus.gif/300px-Fundamental_theorem_of_calculus.gif)
*(图片来源: Wikimedia Commons, by Oleg Alexandrov)*
(想象这个图中的 $x$ 是可以移动的)

现在，让 $x$ 增加一点点 $h$，得到 $x+h$。面积增加了多少？增加的量 $\Delta A = A(x+h) - A(x) = \int_x^{x+h} f(t) dt$。这正好是 $t=x$ 到 $t=x+h$ 之间那条窄窄的区域的面积。

当 $h$ 非常小时，这个窄窄的区域近似于一个矩形，它的宽是 $h$，高呢？由于区间很窄，函数 $f(t)$ 的值近似于 $f(x)$。所以，这块小面积 $\Delta A \approx f(x) \cdot h$。

那么，面积函数 $A(x)$ 的变化率（导数）是什么？
$$ A'(x) = \lim_{h \to 0} \frac{A(x+h) - A(x)}{h} = \lim_{h \to 0} \frac{\Delta A}{h} \approx \lim_{h \to 0} \frac{f(x) \cdot h}{h} = f(x) $$

这再次告诉我们：**变上限定积分（累积面积）对上限变量（位置 $x$）的求导，就等于被积函数在上限那个点的值！**

这个直观理解是核心中的核心。它揭示了积分（求面积/累积）和微分（求变化率）之间的深刻联系。

### 逐步形式化与精确定义 (Gradual Formalization)

现在，我们把刚才的直观想法用更严谨的数学语言来表达。

**定义：变上限积分函数**

设函数 $f(t)$ 在区间 $[a, b]$ 上可积（通常我们要求它连续，这样性质更好）。对于任意 $x \in [a, b]$，定积分 $$ \int_a^x f(t) dt $$ 的值都存在。由于这个积分的值随着上限 $x$ 的变化而变化，它定义了一个新的函数，记作 $F(x)$：
$$ F(x) = \int_a^x f(t) dt \quad (x \in [a, b]) $$
我们称 $F(x)$ 为**由函数 $f(t)$ 产生的变上限定积分函数**。

**几点说明：**

1.  **被积变量 (Dummy Variable):** 注意积分内的变量是 $t$，而函数的自变量是 $x$。我们写 $f(t)$ 和 $dt$ 是为了强调积分是在 $t$ 的维度上进行的，从 $a$ 积到 $x$。这里的 $t$ 被称为**哑变量 (dummy variable)**，你把它换成任何其他不与 $x$ 或 $a$ 冲突的字母（比如 $u, v, \theta$），积分的结果（即 $F(x)$ 的定义）是完全一样的：
    $$ F(x) = \int_a^x f(t) dt = \int_a^x f(u) du = \int_a^x f(\theta) d\theta $$
    使用不同的字母可以避免混淆：积分是在 $t$-轴上进行的，而 $F$ 是 $x$-轴上的一个点对应的函数值。

2.  **下限 (Lower Limit):** 下限 $a$ 通常是一个常数。它决定了我们从哪里开始“累积”。改变 $a$ 会改变 $F(x)$ 的值（相当于给 $F(x)$ 加上或减去一个常数 $\int_{a'}^a f(t) dt$），但我们稍后会看到，这<font color="#ffff00">并不影响</font> $F(x)$ 的导数。

3.  **函数性质：** 如果 $f(t)$ 在 $[a, b]$ 上连续，那么 $F(x) = \int_a^x f(t) dt$ 在 $[a, b]$ 上也是连续的（直观上，<font color="#ffff00">积分累积是平滑的，不会跳跃</font>）。更重要的是，它还是可导的。

### 核心原理与推导过程 (Core Principles & Derivation Walkthrough)

现在我们来严格证明刚才那个激动人心的直观结论：变上限定积分函数的导数等于被积函数在上限处的值。这就是**微积分基本定理的第一部分 (Fundamental Theorem of Calculus, Part 1)** 的一种形式。

**定理：** 如果函数 $f(t)$ 在区间 $[a, b]$ 上连续，那么由 $$ F(x) = \int_a^x f(t) dt $$ 定义的函数 $F(x)$ 在 $[a, b]$ 上可导，并且其导数为：
$$ F'(x) = \frac{d}{dx} \left( \int_a^x f(t) dt \right) = f(x) $$

**推导过程 (Derivation Walkthrough):**

我们的目标是计算 $F'(x)$。根据导数的定义：
$$ F'(x) = \lim_{h \to 0} \frac{F(x+h) - F(x)}{h} $$

**第一步：代入 $F(x)$ 的定义。**
我们需要计算 $F(x+h) - F(x)$。假设 $x$ 和 $x+h$ 都在区间 $[a, b]$ 内。
$$ F(x+h) = \int_a^{x+h} f(t) dt $$
$$ F(x) = \int_a^x f(t) dt $$
因此，
$$ F(x+h) - F(x) = \int_a^{x+h} f(t) dt - \int_a^x f(t) dt $$

**第二步：利用定积分的区间可加性。**
我们知道 $$ \int_a^{x+h} = \int_a^x + \int_x^{x+h} $$ （这里假设 $h>0$，如果 $h<0$，区间会反过来，但性质 $\int_x^{x+h} = -\int_{x+h}^x$ 会保证结果一致）。
所以：
$$ \int_a^{x+h} f(t) dt - \int_a^x f(t) dt = \left( \int_a^x f(t) dt + \int_x^{x+h} f(t) dt \right) - \int_a^x f(t) dt = \int_x^{x+h} f(t) dt $$
这和我们直观推导时得到的结果一致：差值就是那一小段区间的积分。

**第三步：将差值代回导数定义。**
$$ F'(x) = \lim_{h \to 0} \frac{1}{h} \int_x^{x+h} f(t) dt $$

**第四步：处理极限中的积分。** 这是最关键的一步。我们需要计算 $$ \lim_{h \to 0} \frac{1}{h} \int_x^{x+h} f(t) dt $$。
这里需要用到**积分中值定理 (Mean Value Theorem for Integrals)**。该定理说明：如果 $f(t)$ 在闭区间 $[x, x+h]$ (或 $[x+h, x]$ 如果 $h<0$) 上连续，那么存在一点 $c$ 在 $x$ 和 $x+h$ 之间（即 $c \in (x, x+h)$ 或 $c \in (x+h, x)$），使得：
$$ \int_x^{x+h} f(t) dt = f(c) \cdot ( (x+h) - x ) = f(c) \cdot h $$
*   **（积分中值定理的直观理解）**：一个连续函数在一段区间上的积分（面积），等于这段区间的长度乘以函数在该区间内某一点的函数值。想象一下，总有一个“平均高度”$f(c)$，使得 $f(c) \times \text{宽度}$ 恰好等于曲线下的面积。

将积分中值定理的结果代入导数表达式：
$$ F'(x) = \lim_{h \to 0} \frac{1}{h} [f(c) \cdot h] = \lim_{h \to 0} f(c) $$
其中 $c$ 在 $x$ 和 $x+h$ 之间。

**第五步：利用 $f(t)$ 的连续性求极限。**
当 $h \to 0$ 时，区间 $[x, x+h]$（或 $[x+h, x]$）的宽度趋于 0。由于 $c$ 被夹在 $x$ 和 $x+h$ 之间，无论 $c$ 具体在哪里，它都必然趋近于 $x$（即 $c \to x$）。
因为我们假设了 $f(t)$ 在 $x$ 点是连续的，根据连续性的定义，当 $c \to x$ 时，必然有 $f(c) \to f(x)$。
所以：
$$ F'(x) = \lim_{h \to 0} f(c) = f(x) $$

**推导完成！** 我们严格证明了 $$ \frac{d}{dx} \left( \int_a^x f(t) dt \right) = f(x) $$。

这个结果太漂亮了！它说明：**对变上限定积分求导，本质上就是“抵消”了积分操作，直接得到被积函数在积分<font color="#ffff00">上限处</font>的值。** 这就是为什么说微分和积分是互逆运算。

**思考：为什么叫微积分“基本”定理？**
因为它第一次深刻地、定量地揭示了“瞬时变化率”（导数）和“总量累积”（积分）这两个看似不同的概念之间的精确联系。知道了变化率 $f(x)$，就可以通过积分 $\int_a^x f(t) dt$ 找到总量函数（的原函数之一）；知道了总量函数 $F(x) = \int_a^x f(t) dt$，就可以通过求导 $F'(x)$ 找到瞬时变化率 $f(x)$。

---

**推广：更一般情况下的求导**

上面的基本形式是 $$ \frac{d}{dx} \int_a^x f(t) dt = f(x) $$，其中下限 $a$ 是常数，上限 $x$ 是自变量。

现在考虑更复杂的情况：

1.  **变下限，定上限：** $$ \frac{d}{dx} \int_x^b f(t) dt $$
    **思路：** 利用积分性质 $\int_x^b = -\int_b^x$。
    $$ \frac{d}{dx} \int_x^b f(t) dt = \frac{d}{dx} \left( - \int_b^x f(t) dt \right) = - \frac{d}{dx} \left( \int_b^x f(t) dt \right) $$
    现在是基本形式了（下限 $b$ 是常数，上限是 $x$），应用基本定理：
    $$ = - f(x) $$
    **结论：** 对变下限定积分求导，得到**负**的被积函数在下限处的值。

2.  **上、下限都是关于 $x$ 的函数：** $$ \frac{d}{dx} \int_{g(x)}^{h(x)} f(t) dt $$
    这是最一般的情形。比如求 $$ \frac{d}{dx} \int_{\sin x}^{x^2} e^{t^2} dt $$。
    **思路：** 引入一个辅助的常数 $a$（通常取 $f(t)$ 定义域内的任意一点，比如 0），利用积分区间可加性拆分积分，然后应用链式法则 (Chain Rule)。
    $$ \int_{g(x)}^{h(x)} f(t) dt = \int_{g(x)}^a f(t) dt + \int_a^{h(x)} f(t) dt $$
    $$ = - \int_a^{g(x)} f(t) dt + \int_a^{h(x)} f(t) dt $$
    现在我们对这两项分别求导。考虑第一项 $$ \int_a^{g(x)} f(t) dt $$。
    令 $u = g(x)$，那么这一项就是 $$ \int_a^u f(t) dt $$。这是一个关于 $u$ 的函数。根据基本定理，它对 $u$ 的导数是 $f(u)$。
    我们要求的是对 $x$ 的导数，根据链式法则：
    $$ \frac{d}{dx} \left( \int_a^{g(x)} f(t) dt \right) = \frac{d}{du} \left( \int_a^u f(t) dt \right) \cdot \frac{du}{dx} = f(u) \cdot g'(x) $$
    把 $u=g(x)$ 代回去：
    $$ = f(g(x)) \cdot g'(x) $$
    同理，对第二项 $$ \int_a^{h(x)} f(t) dt $$ 求导。令 $v = h(x)$，则有：
    $$ \frac{d}{dx} \left( \int_a^{h(x)} f(t) dt \right) = \frac{d}{dv} \left( \int_a^v f(t) dt \right) \cdot \frac{dv}{dx} = f(v) \cdot h'(x) = f(h(x)) \cdot h'(x) $$
    最后，把两部分加起来（别忘了第一部分前面有个负号）：
    $$ \frac{d}{dx} \int_{g(x)}^{h(x)} f(t) dt = - f(g(x)) \cdot g'(x) + f(h(x)) \cdot h'(x) $$
    或者写成更顺眼的形式：
    $$ \boxed{ \frac{d}{dx} \int_{g(x)}^{h(x)} f(t) dt = f(h(x)) \cdot h'(x) - f(g(x)) \cdot g'(x) } $$
    **推导逻辑的启示 (Why this way?)：** 这个推导过程体现了**化归思想**——把复杂的问题（上下限都是函数）通过引入中间常数 $a$ 和积分性质，**分解**成我们已经解决的基本问题（下限为常数，上限为函数），然后利用**链式法则**这个强大的工具将导数传递进去。这在数学和编程中都是非常常用的策略。

    **记住这个通用公式：**
    （被积函数在上限处的值 $\times$ 上限的导数） - （被积函数在下限处的值 $\times$ 下限的导数）

### 示例与应用 (Examples & Application)

掌握了原理和公式，我们来看几个例子，加深理解并练习使用。

**例 1：基本形式**
求 $$ \frac{d}{dx} \int_1^x \ln(t) dt $$ （假设 $x>0$）。
**解：**
这里 $a=1$ (常数)，$f(t) = \ln(t)$。直接应用基本定理：
$$ \frac{d}{dx} \int_1^x \ln(t) dt = f(x) = \ln(x) $$
**思考：** 这也说明 $\ln(x)$ 的一个原函数可以表示为 $F(x) = \int_1^x \ln(t) dt$。我们知道 $\ln x$ 的原函数是 $x\ln x - x + C$。验证一下：$F(x) = [t\ln t - t]_1^x = (x\ln x - x) - (1\ln 1 - 1) = x\ln x - x + 1$。求导 $F'(x) = (1\cdot \ln x + x \cdot \frac{1}{x} - 1) = \ln x + 1 - 1 = \ln x$。完美符合！

**例 2：变下限**
求 $$ \frac{d}{dx} \int_x^5 \cos(t^2) dt $$。
**解：**
方法一：使用 $\int_x^b = -\int_b^x$。
$$ \frac{d}{dx} \int_x^5 \cos(t^2) dt = \frac{d}{dx} \left( - \int_5^x \cos(t^2) dt \right) = - \frac{d}{dx} \int_5^x \cos(t^2) dt $$
应用基本定理，$f(t) = \cos(t^2)$，所以 $f(x) = \cos(x^2)$。
$$ = - \cos(x^2) $$
方法二：使用通用公式 $$ \frac{d}{dx} \int_{g(x)}^{h(x)} f(t) dt = f(h(x)) \cdot h'(x) - f(g(x)) \cdot g'(x) $$。
这里 $g(x) = x$, $h(x) = 5$ (常数), $f(t) = \cos(t^2)$。
$g'(x) = 1$, $h'(x) = \frac{d}{dx}(5) = 0$。
$f(h(x)) = f(5) = \cos(5^2) = \cos(25)$。
$f(g(x)) = f(x) = \cos(x^2)$。
代入公式：
$$ \frac{d}{dx} \int_x^5 \cos(t^2) dt = f(h(x)) \cdot h'(x) - f(g(x)) \cdot g'(x) $$
$$ = \cos(25) \cdot 0 - \cos(x^2) \cdot 1 = - \cos(x^2) $$
两种方法结果一致。对于只有下限是变量的情况，第一种方法可能更快捷。

**例 3：上限是函数 (需要链式法则)**
求 $$ \frac{d}{dx} \int_0^{x^3} \sin(t) dt $$。
**解：**
使用通用公式。这里 $g(x) = 0$ (常数), $h(x) = x^3$, $f(t) = \sin(t)$。
$g'(x) = 0$。
$h'(x) = \frac{d}{dx}(x^3) = 3x^2$。
$f(h(x)) = f(x^3) = \sin(x^3)$。
$f(g(x)) = f(0) = \sin(0) = 0$。
代入公式：
$$ \frac{d}{dx} \int_0^{x^3} \sin(t) dt = f(h(x)) \cdot h'(x) - f(g(x)) \cdot g'(x) $$
$$ = \sin(x^3) \cdot (3x^2) - 0 \cdot 0 = 3x^2 \sin(x^3) $$
**检查思路：** 令 $u = x^3$。原式为 $F(u) = \int_0^u \sin(t) dt$。根据基本定理 $F'(u) = \sin(u)$。我们需要求 $\frac{d}{dx} F(u)$，根据链式法则，等于 $\frac{dF}{du} \cdot \frac{du}{dx} = \sin(u) \cdot (3x^2) = \sin(x^3) \cdot 3x^2$。结果一致。

**例 4：上下限都是函数**
求 $$ \frac{d}{dx} \int_{\sin x}^{\cos x} (t^2 + 1) dt $$。
**解：**
使用通用公式。这里 $g(x) = \sin x$, $h(x) = \cos x$, $f(t) = t^2 + 1$。
$g'(x) = \cos x$。
$h'(x) = -\sin x$。
$f(h(x)) = f(\cos x) = (\cos x)^2 + 1 = \cos^2 x + 1$。
$f(g(x)) = f(\sin x) = (\sin x)^2 + 1 = \sin^2 x + 1$。
代入公式：
$$ \frac{d}{dx} \int_{\sin x}^{\cos x} (t^2 + 1) dt = f(h(x)) \cdot h'(x) - f(g(x)) \cdot g'(x) $$
$$ = (\cos^2 x + 1) \cdot (-\sin x) - (\sin^2 x + 1) \cdot (\cos x) $$
$$ = -\sin x \cos^2 x - \sin x - \sin^2 x \cos x - \cos x $$
可以根据需要化简，但求导过程到此结束。

**例 5：计算变上限定积分函数的值**
求函数 $F(x) = \int_1^x (3t^2 + 2t) dt$。
**解：**
这个问题不是求导，而是要**计算出这个积分**，得到 $F(x)$ 的表达式。这需要我们找到被积函数 $f(t) = 3t^2 + 2t$ 的<font color="#ffff00">一个原函数</font> $G(t)$，然后使用牛顿-莱布尼茨公式 $F(x) = G(x) - G(1)$。
找原函数：$\int (3t^2 + 2t) dt = t^3 + t^2 + C$。我们取 $C=0$，令 $G(t) = t^3 + t^2$。
那么：
$$ F(x) = G(x) - G(1) = (x^3 + x^2) - (1^3 + 1^2) = x^3 + x^2 - 2 $$
所以，变上限定积分函数 $F(x) = x^3 + x^2 - 2$。
**验证：** 对 $F(x)$ 求导，$F'(x) = 3x^2 + 2x$。根据基本定理，它应该等于 $f(x)$，即被积函数在 $t=x$ 处的值。确实，$f(t)=3t^2+2t$，所以 $f(x)=3x^2+2x$。验证通过！

**应用场景思考：**

*   **物理：** 如果知道一个物体受到的力 $F(x)$ 如何随位置 $x$ 变化，那么从位置 $a$ 移动到位置 $x$ 所做的功 $W(x)$ 就是 $W(x) = \int_a^x F(t) dt$。功的变化率 $\frac{dW}{dx}$ 就是该位置的力 $F(x)$。
*   **概率统计：** 如前所述，连续型随机变量的累积分布函数 (CDF) $F_X(x) = P(X \le x)$ 通常由其概率密度函数 (PDF) $f_X(t)$ 通过变上限定积分定义：$F_X(x) = \int_{-\infty}^x f_X(t) dt$。CDF 的导数就是 PDF：$F_X'(x) = f_X(x)$。
*   **计算机图形学：** 在计算光照累积效果或者进行某些滤波操作时，可能会遇到类似积分的形式。
*   **工程：** 计算变截面梁的弯矩、剪力累积效应等。

### 知识点总结与要点提炼 (Summary & Key Takeaways)

让我们把今天学习的核心内容梳理一下：

1.  **定义：** 变上限定积分 $F(x) = \int_a^x f(t) dt$ 定义了一个函数，其值表示 $f(t)$ 从常数 $a$ 到变量 $x$ 的累积量（如面积、路程等）。
2.  **核心原理（微积分基本定理 Part 1）：** 如果 $f(t)$ 连续，那么 $F(x) = \int_a^x f(t) dt$ 可导，且其导数为：
    $$ \frac{d}{dx} \left( \int_a^x f(t) dt \right) = f(x) $$
    这揭示了微分和积分是互逆运算。
3.  **求导通用公式：** 对于更一般形式 $$\int_{g(x)}^{h(x)} f(t) dt$$，其导数为：
    $$ \frac{d}{dx} \int_{g(x)}^{h(x)} f(t) dt = f(h(x)) \cdot h'(x) - f(g(x)) \cdot g'(x) $$
    **记忆口诀：** 上限的函数值 $\times$ 上限的导数 - 下限的函数值 $\times$ 下限的导数。
    *   **特殊情况：**
        *   下限为常数 $a$：$g(x)=a \implies g'(x)=0$，公式退化为 $f(h(x))h'(x)$。
        *   上限为常数 $b$：$h(x)=b \implies h'(x)=0$，公式退化为 $-f(g(x))g'(x)$。
        *   上下限为 $a$ 和 $x$：$g(x)=a, h(x)=x \implies g'(x)=0, h'(x)=1$，公式退化为 $f(x)$。
4.  **哑变量 (Dummy Variable)：** 积分内的变量 $t$ 只在积分过程中有意义，最终结果是关于上限 $x$ 的函数。$t$ 可以换成其他字母。
5.  **计算 vs. 求导：**
    *   求 $\frac{d}{dx} \int...$ 是求导数，应用上述定理/公式。
    *   求 $F(x) = \int_a^x ...$ 是计算积分本身，需要找到被积函数的原函数，然后用牛顿-莱布尼茨公式。
6.  **重要性：** 描述累积过程，定义新函数，连接微分与积分。

**与其他知识的联系：**

*   **直接联系：** 定积分、原函数、导数、牛顿-莱布尼茨公式、链式法则。
*   **后续联系：** 它是理解和证明微积分基本定理第二部分（即牛顿-莱布尼茨公式 $$ \int_a^b f(x) dx = F(b) - F(a) $$）的基础。也用于求解某些微分方程，以及在多元微积分中推广到路径积分等概念。

### 学科思想与延伸思考 (Underlying Philosophy & Further Thinking)

1.  **逆运算思想：** 这是微积分最核心的思想之一。就像加法与减法、乘法与除法互为逆运算一样，微分（求变化率）和积分（求累积量）在变上限定积分这个框架下完美地体现了它们的逆运算关系。对累积求变化率，得到原来的速率；对速率进行累积，得到总量。
2.  **从局部到整体，再从整体看局部变化：** 积分 $ $\int_a^x f(t) dt$ $ 是将局部的性质 $f(t)$（比如瞬时速度、小面积元）累加起来形成整体 $F(x)$（总路程、总面积）。而求导 $F'(x)$ 则是考察这个整体量 $F(x)$ 如何随着边界 $x$ 的变化而发生局部变化，最终又回到了 $f(x)$。这种局部与整体的相互转化与联系是数学中一种非常深刻的思想。
3.  **构造性思想：** 变上限定积分提供了一种强大的工具，可以用来“构造”或“定义”新的、可能无法用已知初等函数表示的函数。只要被积函数 $f(t)$ 性质良好（比如连续），那么 $F(x) = \int_a^x f(t) dt$ 就定义了一个具有良好性质（连续、可导）的新函数。这极大地扩展了我们能够处理和研究的函数范围。例如，很多特殊函数（如误差函数 erf(x), 对数积分 Li(x), 菲涅尔积分 S(x), C(x)）都是通过这种方式定义的。

**延伸思考：**

*   如果被积函数 $f(t)$ 在某点不连续，那么 $F(x) = \int_a^x f(t) dt$ 在该点还可导吗？导数是什么？（提示：通常在不连续点不可导，但函数 $F(x)$ 仍然是连续的。）
*   我们主要讨论了变上限定积分对上限变量求导。如果被积函数本身也依赖于 $x$，比如求 $$ \frac{d}{dx} \int_a^x f(x, t) dt $$，情况会怎样？（这涉及到更复杂的莱布尼茨积分法则 Leibniz integral rule。）
*   如果 $f(t)$ 没有已知的初等原函数，我们如何计算 $F(x) = \int_a^x f(t) dt$ 的值？（提示：数值积分方法，如梯形法则、辛普森法则等。）

希望这次讲解能帮助你从根本上理解变上限定积分，而不仅仅是记住公式。记住，理解“为什么”和“怎么来的”比单纯记忆“是什么”要重要得多，也更有趣！如果你在任何地方还有疑问，或者想探讨更多例子，随时都可以提出。我们一起慢慢来，把基础打扎实。